import{m as e,d as t,E as a,h as n,S as l,a as s,b as r,c as o,o as i,n as c,u,e as d,t as p,f as m,r as h,w as v,g,I as f,i as y,Q as w,T as _,j as S,k as b,l as E,F as T,p as I,q as x,s as L,v as k,x as V,y as C,z as D,C as O,P as M,M as P,A,B as $,D as N,G as R,H,J as j,K as B,V as z,L as F,N as U,O as W,R as G,U as Y,W as q,X,Y as K,Z as J,_ as Q,$ as Z,a0 as ee,a1 as te,a2 as ae,a3 as ne,a4 as le,a5 as se,a6 as re,a7 as oe,a8 as ie,a9 as ce,aa as ue,ab as de,ac as pe,ad as me,ae as he,af as ve,ag as ge,ah as fe,ai as ye,aj as we,ak as _e,al as Se,am as be,an as Ee,ao as Te,ap as Ie,aq as xe,ar as Le,as as ke,at as Ve,au as Ce,av as De,aw as Oe,ax as Me,ay as Pe,az as Ae,aA as $e,aB as Ne,aC as Re,aD as He,aE as je}from"./vendor-CAdLJpif.js";import{s as Be,a as ze}from"./custom_data-Bprq2x5y.js";import{x as Fe,a as Ue}from"./xiaomi_weather_data-B1Nt7PHR.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const We={name:"home",author:"imsyy",efua:"NanoRocky",github:"https://github.com/imsyy/home",efug:"https://github.com/NanoRocky/home",home:"https://imsyy.top",efuh:"https://nanorocky.top",private:!0,version:"4.3.6 [EFU]",type:"module",scripts:{dev:"vite --host",build:"vue-tsc --noEmit && vite build",preview:"vite preview",format:"prettier --write src/",lint:"eslint . --ext .js,.jsx,.cjs,.mjs,.ts,.tsx,.cts,.mts,.vue --fix","type-check":"vue-tsc --noEmit"},dependencies:{"@applemusic-like-lyrics/lyric":"^0.3.0","@eslint/js":"^9.39.1","@types/node":"^24.10.1","@types/node-fetch":"^2.6.13","@typescript-eslint/parser":"^8.47.0","@worstone/vue-aplayer":"^1.0.7",aplayer:"^1.10.1",autoprefixer:"^10.4.22",axios:"^1.13.2",cssnano:"^7.1.2",dayjs:"^1.11.19","element-plus":"^2.11.8","fetch-jsonp":"^1.3.0",globals:"^16.5.0",jparticles:"^3.5.0","js-md5":"^0.8.3",lodash:"^4.17.21","lodash-es":"^4.17.21","npm-check-updates":"^19.1.2",pinia:"^3.0.4","pinia-plugin-persistedstate":"^4.7.1","pinia-plugin-persistedstate-2":"^2.0.32",postcss:"^8.5.6","postcss-loader":"^8.2.0","postcss-preset-env":"^10.4.0",swiper:"^12.0.3",three:"^0.181.2","ts-loader":"^9.5.4",typescript:"^5.9.3","typescript-eslint":"^8.47.0",unocss:"^66.5.9",vue:"^3.5.24","vue-ts":"^1.0.11","vue-tsc":"^3.1.5",vuex:"^4.1.0"},devDependencies:{"@icon-park/vue-next":"^1.4.2","@vicons/fa":"^0.13.0","@vicons/ionicons4":"^0.13.0","@vicons/ionicons5":"^0.13.0","@vicons/material":"^0.13.0","@vicons/tabler":"^0.13.0","@vicons/utils":"^0.1.4","@vitejs/plugin-vue":"^6.0.2","@vitejs/plugin-vue-jsx":"^5.1.2",eslint:"^9.39.1","eslint-config-prettier":"^10.1.8","eslint-plugin-prettier":"^5.5.4","eslint-plugin-vue":"^10.6.0",prettier:"^3.6.2",sass:"^1.94.2",terser:"^5.44.1","unplugin-auto-import":"^20.2.0","unplugin-vue-components":"^30.0.0",vite:"^7.2.4","vite-node":"^5.2.0","vite-plugin-compression2":"^2.3.1","vite-plugin-pwa":"^1.1.0","vue-eslint-parser":"^10.2.0"},pnpm:{overrides:{glob:"^11.0.3","@jridgewell/sourcemap-codec":"^1.5.5","magic-string":"^0.30.21","workbox-build":"^7.3.0","source-map@^0.8.0-beta":"0.7.6"},ignoredBuiltDependencies:["esbuild"]}};const Ge={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CONFIG_TURN:"true",VITE_DESC_HELLO:"Hello World !",VITE_DESC_HELLO_OTHER:"Oops !",VITE_DESC_TEXT:"一个建立于 21 世纪的小站，存活于互联网的边缘",VITE_DESC_TEXT_OTHER:"哎呀，这都被你发现了（ 再点击一次可关闭 ）",VITE_GD_WEATHER_KEY:"",VITE_METING_SKEY:"",VITE_SFILE_SKEY:"",VITE_SITE_APPLE_LOGO:"/images/icon/apple-touch-icon.png",VITE_SITE_AUTHOR:"無名",VITE_SITE_DES:"一个默默无闻的主页",VITE_SITE_ICP:"豫ICP备2022018134号-1",VITE_SITE_KEYWORDS:"無名,个人主页",VITE_SITE_LOGO:"/images/icon/favicon.ico",VITE_SITE_MAIN_LOGO:"/images/icon/logo.png",VITE_SITE_MAIN_NAME:"無名",VITE_SITE_MPS:"",VITE_SITE_NAME:"天铭",VITE_SITE_START:"2020-10-24",VITE_SITE_URL:"https://imsyy.top/",VITE_SONG_API:"https://metingapi.nanorocky.top/",VITE_SONG_ID:"9379831714",VITE_SONG_ID_SECOND:"9518088898",VITE_SONG_SERVER:"netease",VITE_SONG_SERVER_SECOND:"tencent",VITE_SONG_TYPE:"playlist",VITE_TTS_API:"",VITE_TTS_SKEY:"",VITE_TTS_Style:"chat",VITE_TTS_Voice:"zh-CN-YunxiNeural",VITE_TX_WEATHER_KEY:"",VITE_TX_WEATHER_SKEY:"",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,VITE_SITE_NAME:"天铭",VITE_SITE_AUTHOR:"無名",VITE_SITE_KEYWORDS:"無名,个人主页",VITE_SITE_DES:"一个默默无闻的主页",VITE_SITE_URL:"https://imsyy.top/",VITE_SITE_MAIN_NAME:"無名",VITE_SITE_LOGO:"/images/icon/favicon.ico",VITE_SITE_MAIN_LOGO:"/images/icon/logo.png",VITE_SITE_APPLE_LOGO:"/images/icon/apple-touch-icon.png",VITE_DESC_HELLO:"Hello World !",VITE_DESC_TEXT:"一个建立于 21 世纪的小站，存活于互联网的边缘",VITE_DESC_HELLO_OTHER:"Oops !",VITE_DESC_TEXT_OTHER:"哎呀，这都被你发现了（ 再点击一次可关闭 ）",VITE_TX_WEATHER_KEY:"",VITE_GD_WEATHER_KEY:"",VITE_SITE_START:"2020-10-24",VITE_SITE_ICP:"豫ICP备2022018134号-1",VITE_SITE_MPS:"",VITE_SITE_MICP:"",VITE_SONG_API:"https://metingapi.nanorocky.top/",VITE_SONG_SERVER:"netease",VITE_SONG_SERVER_SECOND:"tencent",VITE_SONG_TYPE:"playlist",VITE_SONG_ID:"9379831714",VITE_SONG_ID_SECOND:"9518088898",VITE_TTS_API:"",VITE_TTS_Voice:"zh-CN-YunxiNeural",VITE_TTS_Style:"chat",VITE_TTS_SKEY:"",VITE_TX_WEATHER_SKEY:"",VITE_METING_SKEY:"",VITE_SFILE_SKEY:""};let Ye=null,qe=[],Xe=!1,Ke=null,Je=null,Qe=null,Ze=null;function et(e,t="zh-CN-YunxiaNeural",a="cheerful",n="Boy",l="1",s="100",r=1500){return new Promise(async(o,i)=>{Je&&(clearTimeout(Je),Je=null),Ye&&(Ye.pause(),Ye=null),Ke&&Ke.abort(),Ke=new AbortController;const{signal:c}=Ke,u=new FormData;u.append("text",e),u.append("voice",t),u.append("style",a),u.append("role",n),u.append("rate",l),u.append("volume",s),Je=setTimeout(async()=>{try{const e=Ge.VITE_TTS_API,t=Ge.VITE_TTS_SKEY;if(!e||""===e||null===e)return void console.error("语音服务API未配置。");t||(Qe=e);const a=await fetch(Qe,{method:"POST",body:u,signal:c});if(!a.ok){const e=await a.json();throw new Error(e.error)}const n=await a.blob(),l=URL.createObjectURL(n);qe.push(l),Xe||tt(o,i)}catch(e){const t=e;"AbortError"===t.name?console.log("Request canceled"):(console.error("Error:",t.message),i(t))}},r)})}function tt(e,t){if(0===qe.length)return void(Xe=!1);Xe=!0;const a=qe.shift();if(!a)return void(Xe=!1);Ye&&(Ye.pause(),Ye=null);const n=new Audio;n.src=a,n.play(),n.onended=()=>{e(),tt(e,t)},n.onerror=a=>{t(a),tt(e,t)},Ye=n}function at(){Ye&&(Ye.pause(),Ye=null),qe=[],Xe=!1,Ke&&(Ke.abort(),Ke=null),Je&&(clearTimeout(Je),Je=null)}function nt(e,t=0){return new Promise(async(a,n)=>{if(!e)return void n(new Error("No file name provided"));Ze=`/speechlocal/${e}`,Ze?(Je&&(clearTimeout(Je),Je=null),Ye&&(Ye.pause(),Ye=null),Je=setTimeout(async()=>{qe=[],Xe=!1,Ke&&(Ke.abort(),Ke=null),qe.push(Ze),Xe||lt(a,n)},t)):n(new Error("Failed to generate audio URL"))})}function lt(e,t){if(0===qe.length)return void(Xe=!1);Xe=!0;const a=qe.shift();if(!a)return void(Xe=!1);const n=new Audio;n.src=a,n.oncanplaythrough=()=>{Ye&&Ye.pause(),Ye=n,Ye.play()},n.onended=()=>{e(),lt(e,t)},n.onerror=a=>{t(a),lt(e,t)}}const st=()=>{const e=t(),a={day:"今日",week:"本周",month:"本月",year:"本年"},n=t=>{const n=e.startOf(t),l=e.endOf(t).diff(n,"day"===t?"hour":"day")+1;let s=e.diff(n,"day"===t?"hour":"day");"week"===t&&(s=(s+6)%7);return{name:a[t],total:l,passed:s,remaining:l-s,percentage:(s/l*100).toFixed(2)}};return{day:n("day"),week:n("week"),month:n("month"),year:n("year")}},rt={4.4:"清明节",5.12:"汶川大地震纪念日",7.7:"中国人民抗日战争纪念日",9.18:"九·一八事变纪念日",12.13:"南京大屠杀死难者国家公祭日"},ot={imgLoadStatus:!1,innerWidth:null,coverType:0,sBGCount:null,seasonalEffects:!0,msgNameShow:!1,siteStartShow:!0,musicClick:!0,musicBoxOpenState:!1,musicIsOk:!1,musicVolume:.7,musicOpenState:!1,backgroundShow:!1,boxOpenState:!1,mobileOpenState:!1,mobileFuncState:!1,setOpenState:!1,setV:!1,playerState:!1,playerCanplay:!1,playerTitle:null,playerArtist:null,playerAlbum:null,playerLrc:[[!0,"歌词加载中..."]],playerLrcShow:!0,footerBlur:!0,footerProgressBar:!0,playerAutoplay:!0,playerLoop:"all",playerOrder:"random",webSpeech:!0,playerSpeechName:!0,playerTrLrc:!1,playerDWRCShow:!0,playerDWRCShowPro:!0,playerDWRCATDB:!0,playerDWRCATDBF:!0,playerDWRCPilfer:!0,playerCurrentTime:null,playerDuration:null,dwrcIndex:-1,dwrcTemp:[],dwrcEnable:!0,dwrcLoading:!1,lyricSeekVersion:0,forceShowBarIcon:!1,showFirefly:!1,showSnowfall:!1,showLantern:!1,showProgressIcon:!1,showProgressIconState:0,theme:"system"},it=s("main",{state:()=>JSON.parse(JSON.stringify(ot)),getters:{getPlayerLrc:e=>e.playerLrc,getPlayerData:e=>({name:e.playerTitle,artist:e.playerArtist,album:e.playerAlbum}),getInnerWidth:e=>e.innerWidth},actions:{setInnerWidth(e){this.innerWidth=e,e>=720&&(this.mobileOpenState=!1,this.mobileFuncState=!1)},setPlayerState(e){this.playerState=!e},setPlayerCanplay(e){this.playerCanplay=e},setPlayerLrc(e){this.playerLrc=e},setPlayerData(e,t){this.playerTitle=e,this.playerArtist=t},setImgLoadStatus(e){this.imgLoadStatus=e},setSBGCount(e){if(0!=this.coverType)return"not use";this.sBGCount=e},resetStore(){this.$reset=()=>{console.log("正在恢复默认配置..."),setTimeout(()=>{this.$state=JSON.parse(JSON.stringify(ot)),console.log("重置完成，页面即将刷新..."),setTimeout(()=>{window.location.href=window.location.pathname},1200)},2500)},this.$reset()}},persist:[{storage:localStorage,pick:["coverType","musicVolume","siteStartShow","musicClick","playerLrcShow","footerBlur","footerProgressBar","playerAutoplay","playerLoop","playerOrder","webSpeech","playerSpeechName","playerTrLrc","playerDWRCShow","playerDWRCShowPro","playerDWRCATDB","playerDWRCATDBF","playerDWRCPilfer","seasonalEffects","theme"]},{storage:sessionStorage,pick:["setV","msgNameShow"]}]}),ct={class:"loader"},ut={class:"loader-text"},dt={class:"name"},pt=(e,t)=>{const a=e.__vccOpts||e;for(const[n,l]of t)a[n]=l;return a},mt=pt(r({__name:"Loading",setup(e){const t=it(),a=Ge.VITE_SITE_NAME;return(e,n)=>(i(),o("div",{id:"loader-wrapper",class:c(u(t).imgLoadStatus?"loaded":null)},[d("div",ct,[n[1]||(n[1]=d("div",{class:"loader-circle"},null,-1)),d("div",ut,[d("span",dt,p(u(a)),1),n[0]||(n[0]=d("span",{class:"tip"}," Loading... ",-1))])]),n[2]||(n[2]=d("div",{class:"loader-section section-left"},null,-1)),n[3]||(n[3]=d("div",{class:"loader-section section-right"},null,-1))],2))}}),[["__scopeId","data-v-d07ec445"]]),ht={class:"message"},vt={class:"logo"},gt=["src"],ft={class:"bg"},yt={class:"sm"},wt={class:"content"},_t=pt(r({__name:"Message",setup(e){const t=it(),l=Ge.VITE_SITE_MAIN_LOGO,s=m(()=>{let e=null;e=t.msgNameShow?Ge.VITE_SITE_MAIN_NAME:Ge.VITE_SITE_URL;const a=e;if(!a)return"imsyy.top".split(".");let n=a;n=n.replace(/^(https?:\/\/)/,"");return n.split("/")[0].split(":")[0].split(".")}),r=h({hello:Ge.VITE_DESC_HELLO,text:Ge.VITE_DESC_TEXT}),E=()=>{(t.getInnerWidth??0)>=721?t.boxOpenState=!t.boxOpenState:(a({message:"当前显示分辨率不足以打开拓展盒子啦qwq【这么“小”还想开impart！（bushi）】",grouping:!0,icon:n(b,{theme:"filled",fill:"#efefef"})}),t.webSpeech&&(at(),nt("分辨率不足.mp3")))};return v(()=>t.boxOpenState,e=>{e?(r.hello=Ge.VITE_DESC_HELLO_OTHER,r.text=Ge.VITE_DESC_TEXT_OTHER,t.webSpeech&&(at(),nt("惊讶.mp3"))):(r.hello=Ge.VITE_DESC_HELLO,r.text=Ge.VITE_DESC_TEXT)}),(e,t)=>(i(),o("div",ht,[d("div",vt,[d("img",{class:"logo-img",src:u(l),alt:"logo"},null,8,gt),d("div",{class:c({name:!0,"text-truncate-ellipsis":!0,long:u(s)[0].length>=6})},[d("span",ft,p(u(s)[0]),1),d("span",yt,"."+p(u(s)[1]),1)],2)]),d("div",{class:"description cards",onClick:E},[d("div",wt,[g(u(f),{size:"16"},{default:y(()=>[g(u(w))]),_:1}),g(_,{name:"fade",mode:"out-in"},{default:y(()=>[(i(),o("div",{key:u(r).hello+u(r).text,class:"text"},[d("p",null,p(u(r).hello),1),d("p",null,p(u(r).text),1)]))]),_:1}),g(u(f),{size:"16"},{default:y(()=>[g(u(S))]),_:1})])])]))}}),[["__scopeId","data-v-13b73fe1"]]),St={class:"social"},bt={class:"link"},Et=["href","onMouseenter"],Tt=["src"],It=pt(r({__name:"SocialLinks",setup(e){const t=it(),n=E("通过这里联系我吧"),l=()=>{a({dangerouslyUseHTMLString:!0,message:"哦？来扩列嘛？~"}),t.webSpeech&&(at(),nt("戳戳社.mp3"))};return(e,t)=>(i(),o("div",St,[d("div",bt,[(i(!0),o(T,null,I(u(Be),e=>(i(),o("a",{key:e.name,href:e.url,target:"_blank",onMouseenter:t=>n.value=e.tip,onMouseleave:t[0]||(t[0]=e=>n.value="通过这里联系我吧")},[d("img",{class:"icon",src:e.icon,height:"24"},null,8,Tt)],40,Et))),128))]),d("span",{class:"tip",onDblclick:l},p(u(n)),33)]))}}),[["__scopeId","data-v-bbfb52e1"]]),xt=pt(r({__name:"Left",setup(e){const t=it();return(e,a)=>(i(),o("div",{class:c(u(t).mobileOpenState?"left hidden":"left")},[g(_t),g(It)],2))}}),[["__scopeId","data-v-6c1be133"]]),Lt=async()=>{const e=await fetch("https://v4.yinghualuo.cn/bejson?format=json");return await e.json()};function kt(e){const t=e.trim().split("\n").filter(e=>!/^\[ch:\d+\]/.test(e.trim())),a=[];for(let n=0;n<t.length;n++){const e=t[n].trim();if(/^\[[a-z]+:.+\]$/i.test(e))continue;if(/^\[[a-z]+:.*?\]$/i.test(e))continue;if(/^\[[a-z]\]$/i.test(e))continue;const l=e.match(/^\[(\d+),(\d+)\](.*)$/);if(!l)continue;const s=parseInt(l[1]),r=parseInt(l[2]),o=l[3].trim();if(!/(\(\d+,\d+(?:,\d+)?\))/.test(o))continue;const i=/^\(\d+,\d+(?:,\d+)?\)/.test(o),c=o.split(/(\(\d+,\d+(?:,\d+)?\))/).filter(Boolean),u=[];let d=1;if(i)for(let t=0;t<c.length-1;t+=2){const e=c[t],a=c[t+1],l=e.match(/^\((\d+),(\d+)(?:,\d+)?\)$/);if(l&&a){const e=a.replace(" ","&nbsp;");u.push([[parseInt(l[1]),parseInt(l[2])],e,n,d]),d+=1}}else for(let t=0;t<c.length-1;t+=2){const e=c[t],a=c[t+1].match(/^\((\d+),(\d+)(?:,\d+)?\)$/);if(a&&e){const t=e.replace(" ","&nbsp;");u.push([[parseInt(a[1]),parseInt(a[2])],t,n,d]),d+=1}}a.push([s,r,u])}if(!a.some(e=>e[2].length>0))throw new Error("歌词文件非逐字歌词");return a}const Vt=pt(r({__name:"Player",props:{theme:{type:String,default:"#efefef"},volume:{type:Number,default:.7,validator:e=>e>=0&&e<=1},songServer:{type:String,default:"netease"},songServerSE:{type:String,default:null},songType:{type:String,default:"playlist"},songId:{type:String,default:"7452421335"},songIdSE:{type:String,default:null},listFolded:{type:Boolean,default:!1},listMaxHeight:{type:Number,default:420}},setup(e,{expose:t}){L(e=>({v5f499923:u(h)}));const l=it();let s=0,r=E(-1);const o=E(null),c=E([]),d=E(0),p=e,h=m(()=>p.listMaxHeight+"px");v(()=>l.playerOrder,e=>{o.value&&o.value&&(o.value.aplayer.order=e)}),v(()=>l.playerLoop,e=>{o.value&&o.value&&(o.value.aplayer.loop=e)}),k(()=>{V(()=>{try{(async(e,t,a,n,l,s)=>{let r=[],o=[],i=[],c=[];if(null!=n&&null!=l){try{const n=await fetch(`${Ge.VITE_SONG_API}?server=${e}&type=${t}&id=${a}`);i=await n.json()}catch(d){i=[],console.error("音乐源 1 请求失败:",d)}try{const e=await fetch(`${Ge.VITE_SONG_API}?server=${n}&type=${t}&id=${l}`);c=await e.json()}catch(d){c=[],console.error("音乐源 2 请求失败:",d)}r=[...c||[],...i||[]]}else{try{const n=await fetch(`${Ge.VITE_SONG_API}?server=${e}&type=${t}&id=${a}`);o=await n.json()}catch(d){o=[],console.error("音乐源 1 请求失败:",d)}r=[...o||[]]}const u=r;if(u.length>0&&u[0]?.url?.startsWith("@")){const[e,t,a,n]=u[0].url.split("@").slice(1),l=await x(n).then(e=>e.json()),r=l.req_0?.data?.sip||[],o=(r.find(e=>!e.startsWith("http://ws"))||r[0]||"").replace("http://","https://");return u.map((e,t)=>({name:e.name||e.title,artist:e.artist||e.author,album:e.album||Ge.VITE_SITE_NAME,url:o+(l.req_0?.data?.midurlinfo[t]?.purl||""),cover:e.cover||e.pic,lrc:s&&e.lrc?`${e.lrc}${e.lrc.includes("?")?"&":"?"}trlrc=true`:e.lrc}))}return u.map(e=>({name:e.name||e.title,artist:e.artist||e.author,album:e.album||Ge.VITE_SITE_NAME,url:e.url,cover:e.cover||e.pic,lrc:s&&e.lrc?`${e.lrc}${e.lrc.includes("?")?"&":"?"}trlrc=true`:e.lrc}))})(p.songServer,p.songType,p.songId,p.songServerSE,p.songIdSE,l.playerTrLrc).then(e=>{l.musicIsOk=!0,c.value=e,"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:"Loading..."}),navigator.mediaSession.setActionHandler("play",()=>{o.value.play()}),navigator.mediaSession.setActionHandler("pause",()=>{o.value.pause()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{_(1)}),navigator.mediaSession.setActionHandler("previoustrack",()=>{_(0)}),navigator.mediaSession.setActionHandler("seekbackward",()=>{S(5)}),navigator.mediaSession.setActionHandler("seekforward",()=>{b(5)})),console.log("音乐加载完成")})}catch(e){console.error(e),l.musicIsOk=!1,a({message:"播放器加载失败",grouping:!0,icon:n(M,{theme:"filled",fill:"var(--music-aplayer-message-icon-color)"})}),l.webSpeech&&(at(),nt("播放器加载失败.mp3"))}})});const g=()=>{if(!o.value)return;console.log("播放"),d.value=o.value.aplayer.index;if(c.value[d.value]&&(l.setPlayerState(o.value.audioRef.paused),l.setPlayerData(c.value[d.value].name,c.value[d.value].artist),a({message:l.getPlayerData.name+" - "+l.getPlayerData.artist,grouping:!0,icon:n(P,{theme:"filled",fill:"var(--music-aplayer-list-icon-color)"})}),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:l.getPlayerData.name||"",artist:l.getPlayerData.artist||"",album:l.getPlayerData.album||"",artwork:[{src:c.value[d.value].cover,sizes:"512x512",type:"image/jpeg"}]}),$()),l.webSpeech&&l.playerSpeechName)){at();const e=Ge.VITE_TTS_Voice,t=Ge.VITE_TTS_Style;et("正在播放，“"+l.getPlayerData.artist+"”的歌曲，《"+l.getPlayerData.name+"》。",e,t)}},f=()=>{l.setPlayerCanplay(!0),$()},y=()=>{l.setPlayerCanplay(!1)},w=()=>{l.setPlayerState(o.value.audioRef.paused)},_=e=>{0===e?o.value.skipBack():o.value.skipForward(),l.setPlayerCanplay(!1),$(),V(()=>{o.value.play()})},S=e=>{if(!o.value)return;const t=o.value.audioStatus.duration,a=o.value.audioStatus.playedTime-e;a>t?_(1):a<t?o.value.aplayer.seek(0):o.value.aplayer.seek(a),$()},b=e=>{const t=o.value.audioStatus.duration,a=o.value.audioStatus.playedTime+e;a>t?_(1):a<t?o.value.aplayer.seek(0):o.value.aplayer.seek(a),$()},T=()=>{let e="";c.value.length>1?(e="播放歌曲出现错误，播放器将在 2s 后进行下一首",l.webSpeech&&(at(),nt("歌曲加载失败.mp3"))):(e="播放歌曲出现错误",l.webSpeech&&(at(),nt("播放器未知异常.mp3"))),a({message:e,grouping:!0,icon:n(M,{theme:"filled",fill:"var(--music-aplayer-message-icon-color)",duration:2e3})}),console.error("播放歌曲: "+o.value.aplayer.audio[o.value.aplayer.index].name+" 出现错误")};function I(){if(o.value){r.value=-1;try{if(null==o.value||null==o.value.aplayer)return;o.value.aplayer.lyrics[d.value];if(1!=l.playerDWRCShow)return l.dwrcEnable=!1,l.dwrcTemp=[],void(l.dwrcLoading=!1);if(l.dwrcIndex==d.value)return;const e=o.value.aplayer.audio[o.value.aplayer.index].lrc+"&dwrc=true";l.dwrcIndex=d.value,l.dwrcLoading=!0,(async e=>{const t=await fetch(e),a=await t.text();l.dwrcIndex=d.value;try{const e=kt(a);return l.dwrcTemp=Array.isArray(e)?e:[],l.dwrcLoading=!1,void(l.dwrcEnable=!0)}catch(c){l.dwrcTemp=[],l.dwrcLoading=!1,l.dwrcEnable=!1}const n=new URLSearchParams(new URL(e).search),s=n.get("id"),r=n.get("server"),i=`${new URL(e).origin}${new URL(e).pathname}`;if(s){if(l.playerDWRCATDB){const e=l.playerDWRCATDBF?{netease:`https://ghfast.top/https://raw.githubusercontent.com/Steve-xmh/amll-ttml-db/main/ncm-lyrics/${s}.yrc`,tencent:`https://ghfast.top/https://raw.githubusercontent.com/Steve-xmh/amll-ttml-db/main/qq-lyrics/${s}.qrc`}:{netease:`https://raw.githubusercontent.com/Steve-xmh/amll-ttml-db/main/ncm-lyrics/${s}.yrc`,tencent:`https://raw.githubusercontent.com/Steve-xmh/amll-ttml-db/main/qq-lyrics/${s}.qrc`};if(!r||!["netease","tencent"].includes(r))return;try{const t=e[r].replace("${songIdlrc}",s),a=await fetch(t);if(404!==a.status){if(a.ok){const e=kt(await a.text());return l.dwrcTemp=Array.isArray(e)?e:[],l.dwrcLoading=!1,void(l.dwrcEnable=!0)}throw new Error("AMLL TTML Database 调用失败...")}l.dwrcTemp=[],l.dwrcLoading=!1,l.dwrcEnable=!1}catch(c){if(l.playerDWRCATDBF){const e={netease:`https://raw.githubusercontent.com/Steve-xmh/amll-ttml-db/main/ncm-lyrics/${s}.yrc`,tencent:`https://raw.githubusercontent.com/Steve-xmh/amll-ttml-db/main/qq-lyrics/${s}.qrc`};if(r||["netease","tencent"].includes(r))try{const t=e[r].replace("${songIdlrc}",s),a=await fetch(t);if(404===a.status)l.dwrcTemp=[],l.dwrcLoading=!1,l.dwrcEnable=!1;else{if(a.ok){const e=kt(await a.text());return l.dwrcTemp=Array.isArray(e)?e:[],l.dwrcLoading=!1,void(l.dwrcEnable=!0)}l.dwrcTemp=[],l.dwrcLoading=!1,l.dwrcEnable=!1}}catch(u){l.dwrcTemp=[],l.dwrcLoading=!1,l.dwrcEnable=!1}}}}else l.dwrcTemp=[],l.dwrcLoading=!1,l.dwrcEnable=!1;if(l.playerDWRCPilfer&&i&&1!=l.dwrcEnable)try{const e=o.value.aplayer.audio[o.value.aplayer.index],t=e.name?.trim(),a=e.artist?.trim(),n="netease"===r?"tencent":"netease",s=`${i}?server=${n}&type=search&id=0&dwrc=true&keyword=${encodeURIComponent(t)}`,c=await fetch(s),u=await c.json();if(Array.isArray(u)&&u.length>0){const e=u.find(e=>e.name?.trim()===t&&e.artist?.trim()===a);if(e&&e.lrc){let t=e.lrc;const a=new URL(t),s=a.searchParams.get("dwrc");null===s?a.searchParams.append("dwrc","true"):"false"===s&&a.searchParams.set("dwrc","true"),t=a.toString();const o=await fetch(t),i=kt(await o.text());return l.dwrcTemp=Array.isArray(i)?i:[],l.dwrcLoading=!1,l.dwrcEnable=!0,void console.log(`当前正在播放 ${r} 来源的《${l.getPlayerData.name}》- '${l.getPlayerData.artist}'，猫猫已成功从 ${n} 偷到逐字歌词~`)}l.dwrcTemp=[],l.dwrcLoading=!1,l.dwrcEnable=!1}else l.dwrcTemp=[],l.dwrcLoading=!1,l.dwrcEnable=!1}catch(c){l.dwrcTemp=[],l.dwrcLoading=!1,l.dwrcEnable=!1}else l.dwrcTemp=[],l.dwrcLoading=!1,l.dwrcEnable=!1;l.dwrcTemp=[],l.dwrcLoading=!1,l.dwrcEnable=!1}})(e)}catch(e){l.dwrcEnable=!1,l.dwrcTemp=[],l.dwrcLoading=!1,console.error(e)}}}const A=()=>{if(!o.value)return;const e=l.playerCurrentTime,t=o.value.audioStatus.playedTime;e&&Math.abs(t-e)>1&&(l.lyricSeekVersion++,r.value=-1),l.playerCurrentTime=t,l.playerDuration=o.value.audioStatus.duration,0==s&&null!=o.value&&null!=o.value.aplayer&&requestAnimationFrame(N)};function $(){o.value&&navigator.mediaSession.setPositionState({duration:o.value.audioStatus.duration,position:o.value.audioStatus.playedTime})}function N(){s=1;try{if(!o.value||!o.value.aplayer)return requestAnimationFrame(N);const e=!l.dwrcEnable||0===l.dwrcTemp.length||l.dwrcLoading,t=1e3*o.value.audioStatus.playedTime,a=t+200;if(e){const e=o.value.aplayer.lyrics[d.value],t=o.value.aplayer.lyricIndex;if(e&&e[t]){let a=e[t][1];"Loading"===a&&(a="歌词加载中..."),1===l.playerLrc.length&&l.playerLrc[0][4]===a&&l.playerLrc[0][2]===t||l.setPlayerLrc([[!0,1,t,0,a]])}else{const e="歌词加载中...";1===l.playerLrc.length&&l.playerLrc[0][4]===e||l.setPlayerLrc([[!0,1,0,0,e]])}}else{const e=l.dwrcTemp;if(-1===r.value){let t=-1;for(let n=0;n<e.length&&e[n][0]<=a;n++)t=n;r.value=t}else r.value+1<e.length&&a>=e[r.value+1][0]&&r.value++;const n=-1!==r.value?e[r.value]:null;let s;if(n){const e=300;s=n[2].map(a=>{const[[n,l],s,r,o]=a,i=t>n+l&&t<=n+l+e;return[t>=n&&t<=n+l||i,n+l<t&&!i,r,o,s,l,n+l-t,"auto"]})}else s=[[!0,1,0,0,`${l.getPlayerData.name||"Loading..."} - ${l.getPlayerData.artist||"NanoRocky"}`]];l.setPlayerLrc(s)}}catch(e){console.error("Error in syncDWRCLrc:",e)}finally{requestAnimationFrame(N)}}return t({playToggle:()=>{o.value.toggle(),$()},changeVolume:e=>{o.value.setVolume(e,!1)},changeSong:_,toggleList:()=>{o.value.toggleList()}}),(t,a)=>u(c)[0]?(i(),C(u(O),{key:0,ref_key:"player",ref:o,audio:u(c),autoplay:u(l).playerAutoplay,theme:e.theme,autoSwitch:!1,loop:u(l).playerLoop,order:u(l).playerOrder,volume:e.volume,showLrc:!0,listFolded:e.listFolded,listMaxHeight:e.listMaxHeight,noticeSwitch:!1,onPlay:g,onPause:w,onLoadstart:I,onTimeupdate:A,onError:T,onCanplay:f,onWaiting:y},null,8,["audio","autoplay","theme","loop","order","volume","listFolded","listMaxHeight"])):D("",!0)}}),[["__scopeId","data-v-576dd18c"]]),Ct={class:"btns"},Dt={class:"control"},Ot={class:"menu"},Mt={class:"name"},Pt={class:"volume"},At={class:"icon"},$t=pt(r({__name:"Music",setup(e){const t=it(),a=E(!1),n=E(t.musicVolume?t.musicVolume:.7),l=E(!1),s=E(null),r=h({server:Ge.VITE_SONG_SERVER,type:Ge.VITE_SONG_TYPE,id:Ge.VITE_SONG_ID,serverse:Ge.VITE_SONG_SERVER_SECOND,idse:Ge.VITE_SONG_ID_SECOND}),c=()=>{s.value.playToggle()},m=e=>{s.value.changeSong(e)},f=e=>{if(t.musicIsOk)switch(e.code){case"Space":e.preventDefault(),c();break;case"PageUp":e.preventDefault(),m(0);break;case"PageDown":e.preventDefault(),m(1)}},w=e=>{e?window.addEventListener("keydown",f):window.removeEventListener("keydown",f)},S=()=>w(!0),b=()=>w(!1);return k(()=>{document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState?w(!0):w(!1)}),window.addEventListener("focus",S),window.addEventListener("blur",b),"visible"===document.visibilityState&&w(!0)}),A(()=>{w(!1),window.removeEventListener("focus",S),window.removeEventListener("blur",b),document.removeEventListener("visibilitychange",S)}),v(()=>n.value,e=>{t.musicVolume=e,s.value.changeVolume(t.musicVolume)}),v(()=>t.musicBoxOpenState,e=>{e?(l.value=!0,s.value.toggleList()):(l.value=!1,s.value.toggleList())}),(e,h)=>{const v=W;return i(),o(T,null,[$(d("div",{class:"music",onMouseenter:h[5]||(h[5]=e=>a.value=!0),onMouseleave:h[6]||(h[6]=e=>a.value=!1)},[d("div",Ct,[d("span",{onClick:h[0]||(h[0]=e=>u(t).musicBoxOpenState=!0)},"音乐列表"),d("span",{onClick:h[1]||(h[1]=e=>u(t).musicOpenState=!1)},"回到一言")]),d("div",Dt,[g(u(R),{theme:"filled",size:"30",fill:"var(--player-control-color)",onClick:h[2]||(h[2]=e=>m(0))}),g(_,{name:"fade",mode:"out-in"},{default:y(()=>[(i(),o("div",{key:String(u(t).playerState),class:"state",onClick:c},[$(g(u(H),{theme:"filled",size:"50",fill:"var(--player-control-color)"},null,512),[[N,!u(t).playerState]]),$(g(u(j),{theme:"filled",size:"50",fill:"var(--player-control-color)"},null,512),[[N,u(t).playerState]])]))]),_:1}),g(u(B),{theme:"filled",size:"30",fill:"var(--player-control-color)",onClick:h[3]||(h[3]=e=>m(1))})]),d("div",Ot,[$(d("div",Mt,[d("span",null,p(u(t).getPlayerData.name?u(t).getPlayerData.name+" - "+u(t).getPlayerData.artist:"银趴未开始（？）"),1)],512),[[N,!u(a)]]),$(d("div",Pt,[d("div",At,[0==u(n)?(i(),C(u(z),{key:0,theme:"filled",size:"24",fill:"var(--player-control-color)"})):u(n)>0&&u(n)<.7?(i(),C(u(F),{key:1,theme:"filled",size:"24",fill:"var(--player-control-color)"})):(i(),C(u(U),{key:2,theme:"filled",size:"24",fill:"var(--player-control-color)"}))]),g(v,{modelValue:u(n),"onUpdate:modelValue":h[4]||(h[4]=e=>G(n)?n.value=e:null),"show-tooltip":!1,min:0,max:1,step:.01},null,8,["modelValue"])],512),[[N,u(a)]])])],544),[[N,u(t).musicOpenState]]),g(_,{name:"fade",mode:"out-in"},{default:y(()=>[$(d("div",{class:"music-list",onClick:h[9]||(h[9]=e=>u(t).musicBoxOpenState=!1)},[g(_,{name:"zoom"},{default:y(()=>[$(d("div",{class:"list",onClick:h[8]||(h[8]=Y(()=>{},["stop"]))},[g(u(q),{class:"close",theme:"filled",size:"28",fill:"var(--close-icon-color)",onClick:h[7]||(h[7]=e=>u(t).musicBoxOpenState=!1)}),g(Vt,{ref_key:"playerRef",ref:s,songServer:u(r).server,songType:u(r).type,songId:u(r).id,songServerSE:u(r).serverse,songIdSE:u(r).idse,volume:u(n)},null,8,["songServer","songType","songId","songServerSE","songIdSE","volume"])],512),[[N,u(l)]])]),_:1})],512),[[N,u(l)]])]),_:1})],64)}}}),[["__scopeId","data-v-492f64c6"]]);let Nt;const Rt={class:"text"},Ht={class:"from"},jt=pt(r({__name:"Hitokoto",setup(e){const t=it(),l=E(!1),s=h({text:"这里应该显示一句话",from:"無名"}),r=async()=>{try{const e=await(async()=>{const e=await fetch("https://v1.hitokoto.cn");return await e.json()})();s.text=e.hitokoto,s.from=e.from}catch(e){a({message:"一言获取失败",icon:n(b,{theme:"filled",fill:"var(--el-message-icon-color)"})}),s.text="这里应该显示一句话",s.from="無名",t.webSpeech&&(at(),nt("一言加载失败.mp3"))}},c=()=>{!function(e,t=300,a=!1){if(null!==Nt&&clearTimeout(Nt),a){var n=!Nt;Nt=setTimeout(function(){Nt=null},t),n&&"function"==typeof e&&e()}else Nt=setTimeout(function(){"function"==typeof e&&e()},t)}(()=>{r()},500)};return k(()=>{r()}),(e,a)=>$((i(),o("div",{class:"hitokoto cards",onMouseenter:a[1]||(a[1]=e=>l.value=!0),onMouseleave:a[2]||(a[2]=e=>l.value=!1),onClick:a[3]||(a[3]=Y(()=>{},["stop"]))},[g(_,{name:"el-fade-in-linear"},{default:y(()=>[$(d("div",{class:"open-music",onClick:a[0]||(a[0]=e=>u(t).musicOpenState=!0)},[g(u(X),{theme:"filled",size:"18",fill:"var(--player-control-color)"}),a[4]||(a[4]=d("span",null,"打开音乐播放器",-1))],512),[[N,u(l)&&u(t).musicIsOk]])]),_:1}),g(_,{name:"el-fade-in-linear",mode:"out-in"},{default:y(()=>[(i(),o("div",{key:u(s).text,class:"content",onClick:c},[d("span",Rt,p(u(s).text),1),d("span",Ht,"-「 "+p(u(s).from)+" 」",1)]))]),_:1})],544)),[[N,!u(t).musicOpenState]])}}),[["__scopeId","data-v-cb33502e"]]),Bt=Fe,zt=Ue,Ft=h({adCode:{city:null,adcode:null},weather:{weather:null,temperature:null,winddirection:null,windpower:null}});async function Ut(){console.log("正在使用小米天气接口");const e=it(),t=await Lt();if(null==t.ip||!t)throw e.webSpeech&&(at(),nt("位置信息获取失败.mp3")),"天气信息获取失败";const a=await(async e=>{const t=await fetch(`https://api.nanorocky.top/tbipinfo/?ip=${e}`);return await t.json()})(t.ip);if("0"!==String(a?.code)||!a?.data.region||!a?.data.city)throw e.webSpeech&&(at(),nt("位置信息获取失败.mp3")),"天气信息获取失败";if(Ft.adCode={city:a.data.county||a.data.city||a.data.region||"未知地区",adcode:Wt(a.data.region,a.data.city,a.data.county)},null==Ft.adCode.adcode)throw e.webSpeech&&(at(),nt("天气加载失败.mp3")),"天气信息获取失败";const n=await(async e=>{const t=await fetch(`https://api.nanorocky.top/xmw/?city=weathercn%3A${e}`);return await t.json()})(Ft.adCode.adcode);try{const e=n.current,t=parseInt(e.weather),a=e.temperature.value,l=Yt(parseFloat(e.wind.direction.value)),s=(e.wind.speed.value,e.wind.speed.unit,Gt(t));return Ft.weather={weather:s,temperature:a,winddirection:l,windpower:Xt(e.wind.speed.value,{returnRange:!0,includeDescription:!1})},Ft}catch(l){throw e.webSpeech&&(at(),nt("天气加载失败.mp3")),"天气信息获取失败"}}const Wt=(e,t,a)=>{if(a){const e=`${t}.${a}`,n=Bt.filter(t=>t.name===e);if(1===n.length)return n[0].city_num}const n=Bt.filter(e=>e.name===t);if(1===n.length)return n[0].city_num;const l=Bt.filter(a=>a.name===`${e}.${t}`);if(1===l.length)return l[0].city_num;const s=Bt.filter(t=>t.name===e);return 1===s.length?s[0].city_num:null},Gt=e=>{const t=zt.weatherinfo.find(t=>t.code===e);return t?t.wea:"未知天气"},Yt=e=>["北","东北","东","东南","南","西南","西","西北"][Math.round(e/45)%8]+"风",qt=[{level:0,minSpeed:0,maxSpeed:.2,description:"无风"},{level:1,minSpeed:.3,maxSpeed:1.5,description:"软风"},{level:2,minSpeed:1.6,maxSpeed:3.3,description:"轻风"},{level:3,minSpeed:3.4,maxSpeed:5.4,description:"微风"},{level:4,minSpeed:5.5,maxSpeed:7.9,description:"和风"},{level:5,minSpeed:8,maxSpeed:10.7,description:"清风"},{level:6,minSpeed:10.8,maxSpeed:13.8,description:"强风"},{level:7,minSpeed:13.9,maxSpeed:17.1,description:"疾风"},{level:8,minSpeed:17.2,maxSpeed:20.7,description:"大风"},{level:9,minSpeed:20.8,maxSpeed:24.4,description:"烈风"},{level:10,minSpeed:24.5,maxSpeed:28.4,description:"狂风"},{level:11,minSpeed:28.5,maxSpeed:32.6,description:"暴风"},{level:12,minSpeed:32.7,maxSpeed:1/0,description:"飓风"}];function Xt(e,t={}){const{returnRange:a=!1,includeDescription:n=!1}=t,l=qt.find(t=>e>=t.minSpeed&&e<=t.maxSpeed);if(!l)return"未知风级";if(a&&e>l.minSpeed+.7*(l.maxSpeed-l.minSpeed)){const e=qt.find(e=>e.level===l.level+1);if(e)return n?`${l.level}-${e.level}级 (${l.description})`:`${l.level}-${e.level}级`}return n?`${l.level}级 (${l.description})`:`${l.level}级`}const Kt={key:0,class:"weather"},Jt={class:"sm-hidden"},Qt={class:"sm-hidden"},Zt={key:1,class:"weather"},ea=r({__name:"Weather",setup(e){const t=it(),l=Ge.VITE_TX_WEATHER_KEY,s=Ge.VITE_GD_WEATHER_KEY,r=h({adCode:{city:null,adcode:null},weather:{weather:null,temperature:null,winddirection:null,windpower:null}}),c=(e,a)=>{try{const t=parseFloat(e.toString().replace(/[^\d.-]/g,"")),n=parseFloat(a.toString().replace(/[^\d.-]/g,""));if(isNaN(t)||isNaN(n))throw new b("无法解析温度数据");const l=(t+n)/2;return Math.round(l)}catch(n){return console.error("计算温度出现错误：",n),t.webSpeech&&(at(),nt("天气信息无法计算.mp3")),"NaN"}},m=async()=>{const e=(await(async()=>{const e=await fetch("https://api.oioweb.cn/api/weather/GetWeather");return await e.json()})()).result;r.adCode={city:e.city.City||"未知地区",adcode:null},r.weather={weather:e.condition.day_weather,temperature:c(e.condition.min_degree,e.condition.max_degree),winddirection:e.condition.day_wind_direction,windpower:e.condition.day_wind_power}},v=async()=>{const e=await(async()=>{const e=await fetch("https://api.vvhan.com/api/weather");return await e.json()})();if("true"!==String(e?.success))throw t.webSpeech&&(at(),nt("天气加载失败.mp3")),"天气信息获取失败";r.adCode={city:e.city||"未知地区",adcode:null},r.weather={weather:e.data.type||e.data.night.type,temperature:c(e.data.low||e.data.night.low,e.data.high||e.data.night.high),winddirection:e.data.fengxiang||e.data.night.fengxiang,windpower:e.data.fengli&&"级"!==e.data.fengli.trim()?e.data.fengli:e.data.night?.fengli||"未知"}},g=async()=>{try{if(!s&&!l){console.log("未配置天气接口密钥，使用备用天气接口");try{await(async()=>{const e=await Ut();if(!e)throw"天气信息获取失败";r.adCode=e.adCode,r.weather=e.weather})()}catch(e){try{await v()}catch(a){await m()}}}}catch(e){console.error("天气信息获取失败："+e),f("天气信息获取失败"),t.webSpeech&&(at(),nt("天气加载失败.mp3"))}},f=e=>{a({message:e,icon:n(b,{theme:"filled",fill:"var(--el-message-icon-color)"})}),console.error(e)};return k(()=>{g()}),(e,t)=>u(r).adCode.city&&u(r).weather.weather?(i(),o("div",Kt,[d("span",null,p(u(r).adCode.city)+" ",1),d("span",null,p(u(r).weather.weather)+" ",1),d("span",null,p(u(r).weather.temperature)+"℃",1),d("span",Jt,"  "+p(u(r).weather.winddirection?.endsWith("风")?u(r).weather.winddirection:u(r).weather.winddirection+"风")+"  ",1),d("span",Qt,p(u(r).weather.windpower?.endsWith("级")?u(r).weather.windpower:u(r).weather.windpower+"级")+" ",1)])):(i(),o("div",Zt,[...t[0]||(t[0]=[d("span",null,"天气数据获取失败",-1)])]))}}),ta={class:"left"},aa={class:"right cards"},na={class:"time"},la={class:"date"},sa={class:"sm-hidden"},ra={class:"text"},oa=pt(r({__name:"index",setup(e){const t=it(),a=E({year:0,month:0,day:0,weekday:"",hour:0,minute:0,second:0}),n=E(null),l=Ge.VITE_SONG_ID,s=()=>{Object.assign(a.value,(()=>{let e=new Date;return{year:e.getFullYear(),month:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,day:e.getDate()<10?"0"+e.getDate():e.getDate(),hour:e.getHours()<10?"0"+e.getHours():e.getHours(),minute:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),second:e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds(),weekday:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][e.getDay()]}})())};return k(()=>{s(),n.value=setInterval(s,1e3)}),K(()=>{null!==n.value&&clearInterval(n.value)}),(e,n)=>{const s=Q,r=J;return i(),o("div",{class:c(u(t).mobileFuncState?"function mobile":"function")},[g(r,{gutter:20},{default:y(()=>[g(s,{span:12},{default:y(()=>[d("div",ta,[g(jt),u(l)?(i(),C($t,{key:0})):D("",!0)])]),_:1}),g(s,{span:12},{default:y(()=>[d("div",aa,[d("div",na,[d("div",la,[d("span",null,p(a.value.year)+" 年 ",1),d("span",null,p(a.value.month)+" 月 ",1),d("span",null,p(a.value.day)+" 日 ",1),d("span",sa,p(a.value.weekday),1)]),d("div",ra,[d("span",null,p(a.value.hour)+":"+p(a.value.minute)+":"+p(a.value.second),1)])]),g(ea)])]),_:1})]),_:1})],2)}}}),[["__scopeId","data-v-f358b2c6"]]),ia={key:0,class:"links"},ca={class:"line"},ua={key:1,class:"title"},da=["onClick"],pa={class:"name text-truncate-ellipsis"},ma=pt(r({__name:"Links",setup(e){const t=it(),a=ze,n=m(()=>{const e=[];for(let t=0;t<a.length;t+=6)e.push(a.slice(t,t+6));return e}),l={Blog:pe,Cloud:de,CompactDisc:ue,Compass:ce,Book:ie,Fire:oe,LaptopCode:re};return(e,a)=>{const s=Q,r=J;return u(ze)[0]?(i(),o("div",ia,[d("div",ca,[g(u(f),{size:"20",class:"iconl"},{default:y(()=>[g(u(Z))]),_:1}),u(t).mobileOpenState?(i(),o("span",{key:0,class:"title text-truncate-ellipsis",onClick:a[0]||(a[0]=e=>u(t).setOpenState=!u(t).setOpenState)},"网站列表")):(i(),o("span",ua,"网站列表"))]),u(ze)[0]?(i(),C(u(ae),{key:0,modules:[u(ee),u(te)],"slides-per-view":1,"space-between":40,pagination:{el:".swiper-pagination",clickable:!0,bulletElement:"div"},mousewheel:!0},{default:y(()=>[(i(!0),o(T,null,I(u(n),(e,a)=>(i(),C(u(ne),{key:"site-"+a},{default:y(()=>[g(r,{class:"link-all",gutter:20},{default:y(()=>[(i(!0),o(T,null,I(e,(e,a)=>(i(),C(s,{span:8,key:"item-"+a},{default:y(()=>[d("div",{class:"item cards",style:le(a<3?"margin-bottom: 20px":null),onClick:a=>{var n;"音乐"===(n=e).name&&t.musicClick&&t.musicIsOk?t.musicBoxOpenState=!t.musicBoxOpenState:window.open(n.link,"_blank")}},[g(u(f),{size:"26"},{default:y(()=>[(i(),C(se(l[e.icon])))]),_:2},1024),d("span",pa,p(e.name),1)],12,da)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128)),a[1]||(a[1]=d("div",{class:"swiper-pagination"},null,-1))]),_:1},8,["modules"])):D("",!0)])):D("",!0)}}}),[["__scopeId","data-v-155ae116"]]),ha={class:"bg"},va={class:"sm"},ga=pt(r({__name:"Right",setup(e){const t=it(),a=m(()=>{let e=Ge.VITE_SITE_URL;e=e.replace(/^(https?:\/\/)/,"");return e.split("/")[0].split(":")[0].split(".")});return(e,n)=>(i(),o("div",{class:c(u(t).mobileOpenState?"right":"right is-hidden")},[d("div",{class:"logo text-truncate-ellipsis",onClick:n[0]||(n[0]=e=>u(t).mobileFuncState=!u(t).mobileFuncState)},[d("span",ha,p(u(a)[0]),1),d("span",va,"."+p(u(a)[1]),1)]),g(oa),g(ma)],2))}}),[["__scopeId","data-v-589fb52f"]]);let fa=null,ya=null,wa=null,_a=0;const Sa=[],ba=()=>{wa&&(wa.width=window.innerWidth,wa.height=window.innerHeight)},Ea=()=>{it().showSnowfall=!0,(fa||ya)&&Ia(),wa||(wa=document.createElement("canvas"),wa.id="snowCanvas",wa.style.position="fixed",wa.style.top="0",wa.style.left="0",wa.style.width="100%",wa.style.height="100%",wa.style.pointerEvents="none",wa.style.zIndex="0",wa.style.willChange="transform",document.body.appendChild(wa));const e=wa?.getContext("2d");if(!e||!wa)return;const t=()=>{for(let e of Sa)e.angle+=.02,e.x+=e.speedX+.3*Math.sin(e.angle),e.y+=e.speedY,(e.y>wa.height||e.x>wa.width+50||e.x<-50)&&(e.x=Math.random()*wa.width,e.y=-e.radius,e.speedX=.6*Math.random()+.2,e.speedY=1.5*Math.random()+.5,e.radius=2*Math.random()+1,e.opacity=.7*Math.random()+.3,e.angle=Math.random()*Math.PI*2)},a=()=>{e.clearRect(0,0,wa.width,wa.height),Sa.forEach(t=>{e.beginPath(),e.globalAlpha=t.opacity,e.fillStyle="white",e.arc(t.x,t.y,t.radius,0,2*Math.PI),e.fill()}),e.globalAlpha=1,t(),fa=requestAnimationFrame(a)};window.addEventListener("resize",ba),ba(),(()=>{Sa.length=0;const e=Ta();_a="mobile"===e?28:60;for(let t=0;t<_a;t++)Sa.push({x:Math.random()*wa.width,y:Math.random()*wa.height,opacity:.3*Math.random()+.2,speedX:.3*Math.random()+.2,speedY:1.2*Math.random()+.3,radius:2*Math.random()+1,angle:Math.random()*Math.PI*2})})(),a(),ya=setInterval(()=>{fa&&(cancelAnimationFrame(fa),fa=null,a())},1e3/30)},Ta=()=>{const e=navigator.userAgent.toLowerCase();return/mobile|android|iphone|ipad|ipod|windows phone/.test(e)?/ipad|tablet|playbook|silk|kindle/.test(e)?"tablet":"mobile":"pc"},Ia=()=>{fa&&(cancelAnimationFrame(fa),fa=null),ya&&(clearInterval(ya),ya=null),wa&&wa.parentNode===document.body&&(document.body.removeChild(wa),wa=null),Sa.length=0,window.removeEventListener("resize",ba);it().showSnowfall=!1};let xa=null,La=null,ka=null,Va=0;const Ca=[],Da=()=>{ka&&(ka.width=window.innerWidth,ka.height=window.innerHeight)},Oa=()=>{it().showFirefly=!0,(xa||La)&&Pa(),ka||(ka=document.createElement("canvas"),ka.id="fireflyCanvas",ka.style.position="fixed",ka.style.top="0",ka.style.left="0",ka.style.width="100%",ka.style.height="100%",ka.style.pointerEvents="none",ka.style.zIndex="0",ka.style.willChange="transform",document.body.appendChild(ka));const e=ka?.getContext("2d");if(!e||!ka)return;const t=()=>{Ca.forEach(e=>{e.x+=e.speedX,e.y+=e.speedY,(e.x>ka.width||e.x<0)&&(e.speedX*=-1),(e.y>ka.height||e.y<0)&&(e.speedY*=-1)})},a=()=>{e.clearRect(0,0,ka.width,ka.height),e.fillStyle="rgba(255, 255, 0, 0.8)",e.beginPath(),Ca.forEach(t=>{e.moveTo(t.x,t.y),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!0)}),e.fill(),t(),xa=requestAnimationFrame(a)};window.addEventListener("resize",Da),Da(),(()=>{Ca.length=0;const e=Ma();Va="mobile"===e?24:48;for(let t=0;t<Va;t++)Ca.push({x:Math.random()*ka.width,y:Math.random()*ka.height,opacity:Math.random(),speedX:1.2*Math.random()-.35,speedY:1.2*Math.random()-.35,radius:2*Math.random()+1})})(),a(),La=setInterval(()=>{xa&&(cancelAnimationFrame(xa),xa=null,a())},1e3/30)},Ma=()=>{const e=navigator.userAgent.toLowerCase();return/mobile|android|iphone|ipad|ipod|windows phone/.test(e)?/ipad|tablet|playbook|silk|kindle/.test(e)?"tablet":"mobile":"pc"},Pa=()=>{xa&&(cancelAnimationFrame(xa),xa=null),La&&(clearInterval(La),La=null),ka&&ka.parentNode===document.body&&(document.body.removeChild(ka),ka=null),Ca.length=0,window.removeEventListener("resize",Da);it().showFirefly=!1};let Aa=null,$a=null;function Na(){it().showLantern=!0,(Aa||$a)&&Ra(),Aa=document.createElement("style"),Aa.type="text/css",Aa.innerHTML='\n    .j-china-lantern .lantern__warpper {\n      position: fixed;\n      top: 12px;\n      left: 40px;\n      pointer-events: none;\n      user-select: none;\n      z-index: 999;\n    }\n\n    .j-china-lantern .lantern__warpper.lantern__secondary {\n      left: calc(100% - 130px);\n    }\n\n    .j-china-lantern .lantern__warpper.lantern__secondary .lantern__box {\n      animation-duration: 3s;\n      animation-delay: 1s;\n    }\n\n    .j-china-lantern .lantern__box {\n      position: relative;\n      display: inline-block;\n      width: 90px;\n      height: 70px;\n      background: rgba(216, 0, 15, 0.8);\n      border-radius: 50% 50%;\n      animation: lantern-swing 3s ease-in-out infinite alternate-reverse;\n      transform-origin: 50% -70px;\n      box-shadow: -5px 5px 50px 4px #fa6c00;\n    }\n\n    .j-china-lantern .lantern__box:after,\n    .j-china-lantern .lantern__box:before {\n      content: "";\n      position: absolute;\n      height: 8px;\n      width: 45px;\n      left: 50%;\n      border: 1px solid #dc8f03;\n      background: linear-gradient(\n        90deg,\n        #dc8f03,\n        orange,\n        #dc8f03,\n        orange,\n        #dc8f03\n      );\n    }\n\n    .j-china-lantern .lantern__box:before {\n      top: 0;\n      border-radius: 5px 5px 0 0;\n      transform: translate(-50%, -50%);\n    }\n\n    .j-china-lantern .lantern__box:after {\n      bottom: 0;\n      border-radius: 0 0 5px 5px;\n      transform: translate(-50%, 50%);\n    }\n\n    .j-china-lantern .lantern__line {\n      position: absolute;\n      width: 2px;\n      height: 12px;\n      top: 0;\n      left: 50%;\n      transform: translate(-50%, -100%);\n      background: #dc8f03;\n    }\n\n    .j-china-lantern .lantern__circle {\n      width: 80%;\n      box-sizing: border-box;\n    }\n\n    .j-china-lantern .lantern__circle,\n    .j-china-lantern .lantern__circle .lantern__ellipse {\n      height: 100%;\n      margin: 0 auto;\n      border-radius: 50%;\n      border: 2px solid #dc8f03;\n    }\n\n    .j-china-lantern .lantern__circle .lantern__ellipse {\n      width: 50%;\n    }\n\n    .j-china-lantern .lantern__circle .lantern__text {\n      font-family: "华文行楷", "Microsoft YaHei", sans-serif;\n      font-size: 24.3px;\n      color: #dc8f03;\n      font-weight: 700;\n      line-height: 66px;\n      text-align: center;\n    }\n\n    .j-china-lantern .lantern__tail {\n      position: relative;\n      width: 4px;\n      height: 12px;\n      margin: 0 auto;\n      animation: lantern-swing 4s ease-in-out infinite alternate-reverse;\n      background: orange;\n      border-radius: 0 0 5px 5px;\n    }\n\n    .j-china-lantern .lantern__tail .lantern__junction {\n      position: absolute;\n      top: 0;\n      left: 50%;\n      width: 8px;\n      height: 8px;\n      transform: translate(-50%, 8.4px);\n      background: #e69603;\n      border-radius: 50%;\n    }\n\n    .j-china-lantern .lantern__tail .lantern__rect {\n      position: absolute;\n      top: 0;\n      left: 50%;\n      transform: translate(-50%, 10.8px);\n      width: 8px;\n      height: 24px;\n      background: orange;\n      border-radius: 5px 5px 0 5px;\n    }\n\n    @keyframes lantern-swing {\n      0% {\n        transform: rotate(-8deg);\n      }\n      to {\n        transform: rotate(8deg);\n      }\n    }\n\n    @media (max-width: 520px) {\n      .j-china-lantern {\n        display: none;\n      }\n    }\n  ',$a=document.createElement("div"),$a.className="j-china-lantern",$a.innerHTML='\n    <div class="lantern__warpper">\n      <div class="lantern__box">\n        <div class="lantern__line"></div>\n        <div class="lantern__circle">\n          <div class="lantern__ellipse">\n            <div class="lantern__text">新</div>\n          </div>\n        </div>\n        <div class="lantern__tail">\n          <div class="lantern__rect"></div>\n          <div class="lantern__junction"></div>\n        </div>\n      </div>\n    </div>\n    <div class="lantern__warpper lantern__secondary">\n      <div class="lantern__box">\n        <div class="lantern__line"></div>\n        <div class="lantern__circle">\n          <div class="lantern__ellipse">\n            <div class="lantern__text">年</div>\n          </div>\n        </div>\n        <div class="lantern__tail">\n          <div class="lantern__rect"></div>\n          <div class="lantern__junction"></div>\n        </div>\n      </div>\n    </div>\n  ',document.head.appendChild(Aa),document.body.appendChild($a)}function Ra(){Aa&&Aa.parentNode===document.head&&(document.head.removeChild(Aa),Aa=null),$a&&$a.parentNode===document.body&&(document.body.removeChild($a),$a=null);it().showLantern=!1}const Ha=["src"],ja=["href"],Ba=pt({__name:"Background",emits:["loadComplete"],setup(e,{emit:t}){const l=it(),s=E(null),r=E(null),p=t,m=Ge.VITE_SFILE_SKEY,h=E(!1);let f=10,w=2,S=0,T=0,I=null,x=0,L=null;const V=async e=>{h.value||(h.value=!0,(async()=>{try{const t=await async function(){try{m||(I="/images/config.json");const e=await fetch(I),t=await e.json();return f=Math.max(t.bgImageCount,1),w=Math.max(t.bgImageCountP,1),null!=L&&L<=f&&L>0?(S=L,T=L,L=null,!0):(S=Math.floor(Math.random()*f+1),T=Math.floor(Math.random()*w+1),L=null,!0)}catch(e){return console.error("无法加载壁纸配置文件:",e),S=Math.floor(Math.random()*f+1),T=Math.floor(Math.random()*w+1),L=null,!0}}(),a=await(()=>{const e=navigator.userAgent.toLowerCase();return/mobile|android|iphone|ipad|ipod|windows phone/.test(e)?/ipad|tablet|playbook|silk|kindle/.test(e)?"tablet":"mobile":"pc"})();if(!t)return;0==e?"mobile"===a?m||(s.value=`/images/phone/backgroundphone${T}.jpg`):m||(s.value=`/images/background${S}.jpg`):1==e?s.value="https://api.dujin.org/bing/1920.php":2==e?s.value="https://api.vvhan.com/api/wallpaper/views":3==e&&(s.value="https://api.vvhan.com/api/wallpaper/acg")}finally{h.value=!1}})())},C=()=>{r.value=setTimeout(()=>{l.setImgLoadStatus(!0)},Math.floor(301*Math.random())+300)},O=()=>{console.log("壁纸加载且动画完成"),p("loadComplete")},M=async()=>{console.error("壁纸加载失败：",s.value),a({message:"壁纸加载失败，已临时切换回默认",icon:n(b,{theme:"filled",fill:"var(--el-message-icon-color)"})}),s.value=`/images/background${S}.webp`,l.webSpeech&&(at(),nt("壁纸加载失败.mp3"))};v(()=>l.coverType,async e=>{await V(Number(e))},{immediate:!0});const P=async(e,t,a)=>{const n=(new Date).getMonth()+1;if(0==e){if(1==x&&1==t&&"normal"==a)return;if([12,1,2].includes(n))if(1==t)Ea();else{if(0!=t)return;Ia()}else if([1,2].includes(n))if(1==t)Na();else{if(0!=t)return;Ra()}else{if(![7,8,9].includes(n))return;if(1==t)Oa();else{if(0!=t)return;Pa()}}}else if(1==e)if(1==t)Ea();else{if(0!=t)return;Ia()}else if(2==e)if(1==t)Na();else{if(0!=t)return;Ra()}else{if(3!=e)return;if(1==t)Oa();else{if(0!=t)return;Pa()}}x=1};return k(async()=>{await V(Number(l.coverType)),l.seasonalEffects?await P(0,!0,"normal"):x=1}),K(()=>{r.value&&clearTimeout(r.value)}),v(()=>l.seasonalEffects,async e=>{0!=x&&(e?await P(0,!0,"userChange"):(await P(0,!1,"userChange"),await P(1,!1,"userChange"),await P(2,!1,"userChange"),await P(3,!1,"userChange")))}),v(()=>l.sBGCount,async e=>{0==l.coverType&&null!=e&&0!=e&&(L=e,await V(Number(l.coverType)),l.setSBGCount(null))}),(e,t)=>(i(),o("div",{class:c(u(l).backgroundShow?"cover show":"cover")},[$(d("img",{src:s.value,class:"bg",alt:"cover",onLoad:C,onErrorOnce:M,onAnimationend:O},null,40,Ha),[[N,u(l).imgLoadStatus]]),d("div",{class:c(u(l).backgroundShow?"gray o-hidden":"gray")},null,2),g(_,{name:"fade",mode:"out-in"},{default:y(()=>[u(l).backgroundShow&&"3"!=u(l).coverType?(i(),o("a",{key:0,class:"down",href:s.value,target:"_blank"}," 下载壁纸 ",8,ja)):D("",!0)]),_:1})],2))}},[["__scopeId","data-v-8b7a5875"]]),za={key:0,class:"progress-bar"},Fa=pt(r({__name:"ProgressBar",setup(e){const t=it(),a=E(!1),n=E(null),l=E(null),s=E(null),r=E(!1),p=E(0);let h=null;const w=m(()=>t.playerState?t.playerCurrentTime/t.playerDuration*100:0),_=()=>{2===t.showProgressIconState||(t.showProgressIconState=1),t.showProgressIcon=!0},S=()=>{2===t.showProgressIconState?t.showProgressIcon=!0:(t.showProgressIconState=0,t.showProgressIcon=!1)},b=e=>{r.value=!0,a.value=!0;const t=document.querySelector(".progress-bar").getBoundingClientRect(),n=e.clientX-t.left;p.value=n/t.width*100},T=()=>{r.value&&(r.value=!1,a.value=!1,h&&clearTimeout(h),n.value&&t.playerDuration&&(n.value.currentTime=p.value/100*t.playerDuration),h=setTimeout(()=>{l.value&&(l.value.style.left="")},1e3))},I=me.throttle(e=>{if(!r.value)return;const t=document.querySelector(".progress-bar").getBoundingClientRect();let a=e.clientX-t.left;if(a=Math.max(0,Math.min(t.width,a)),p.value=a/t.width*100,l.value){const e=a-l.value.offsetWidth/2;l.value.style.left=`${e}px`}},16),x=e=>{if(e.touches.length>1)return;r.value=!0,a.value=!0,s.value=e.touches[0].identifier;const t=document.querySelector(".progress-bar").getBoundingClientRect(),n=e.touches[0].clientX-t.left;p.value=n/t.width*100},L=me.throttle(e=>{if(!r.value||null===s.value)return;const t=Array.from(e.touches).find(e=>e.identifier===s.value);if(!t)return;e.preventDefault();const a=document.querySelector(".progress-bar").getBoundingClientRect();let n=t.clientX-a.left;if(n=Math.max(0,Math.min(a.width,n)),p.value=n/a.width*100,l.value){const e=n-l.value.offsetWidth/2;l.value.style.left=`${e}px`}},16),O=()=>{r.value&&(r.value=!1,a.value=!1,s.value=null,n.value&&t.playerDuration&&(n.value.currentTime=p.value/100*t.playerDuration),h&&clearTimeout(h),h=setTimeout(()=>{l.value&&(l.value.style.left="")},1e3))};return v(()=>t.playerState,(e,t)=>{n.value=document.querySelector("audio")}),v(()=>t.forceShowBarIcon,e=>{e?(t.showProgressIconState=2,t.showProgressIcon=!0):(t.showProgressIconState=0,t.showProgressIcon=!1)}),k(()=>V(()=>{n.value=document.querySelector("audio");const e=document.querySelector("#footer");e&&(e.addEventListener("mouseenter",_),e.addEventListener("mouseleave",S)),document.addEventListener("mouseup",T),document.addEventListener("mousemove",I),document.addEventListener("touchmove",L),document.addEventListener("touchend",O),document.addEventListener("touchcancel",O)})),K(()=>{document.removeEventListener("mouseup",T),document.removeEventListener("mousemove",I),document.removeEventListener("touchmove",L),document.removeEventListener("touchend",O),document.removeEventListener("touchcancel",O)}),(e,a)=>u(t).footerProgressBar?(i(),o("div",za,[d("div",{class:c(["progress",{dragging:r.value}]),style:le({width:r.value?`${p.value}%`:`${w.value}%`})},[u(t).showProgressIcon?(i(),o("img",{key:0,src:"/images/icon/ProgressBar.ico",class:"progress-icon",draggable:"false",onMousedown:b,onTouchstart:Y(x,["prevent"]),ref_key:"icon",ref:l},null,544)):D("",!0),u(t).playerCanplay?D("",!0):(i(),C(u(f),{key:1,size:"32",color:"black",class:"ReloadCircle"},{default:y(()=>[g(u(he))]),_:1}))],6)])):D("",!0)}}),[["__scopeId","data-v-0e5a2ab9"]]),Ua={key:0,class:"power"},Wa={key:0,class:"site-start"},Ga=["href"],Ya={class:"o-hidden"},qa=["href"],Xa={class:"o-hidden"},Ka=["href"],Ja={key:0},Qa={key:0,href:"https://beian.miit.gov.cn",target:"_blank"},Za={key:1},en={key:0,href:"https://beian.mps.gov.cn",target:"_blank"},tn={class:"dwrc-box"},an={class:"dwrc-2 lrc-text text-truncate-ellipsis",id:"dwrc-2-wrap"},nn=["innerHTML"],ln={class:"dwrc-1 lrc-text text-truncate-ellipsis",id:"dwrc-1-wrap"},sn=["id","innerHTML"],rn=["innerHTML"],on=pt(r({__name:"Footer",setup(e){const t=it(),n=(new Date).getFullYear();E(null),E(0),E(0),E(null),E(null);const l=E(Ge.VITE_SITE_START?.length>=4?parseInt(Ge.VITE_SITE_START.substring(0,4)):null),s=m(()=>null!==l.value&&l.value<n),r=E(Ge.VITE_SITE_ICP),h=E(Ge.VITE_SITE_MPS);E(Ge.VITE_SITE_MICP);const w=E(Ge.VITE_SITE_AUTHOR),S=m(()=>{const e=Ge.VITE_SITE_URL;let t=e;/^https?:\/\//i.test(e)||(t="https://"+e),t=t.replace(/^http:\/\//i,"https://");try{return new URL(t).toString()}catch(a){return"https://www.imsyy.top/"}}),b=()=>{t.forceShowBarIcon=!t.forceShowBarIcon,a({dangerouslyUseHTMLString:!0,message:""+(t.forceShowBarIcon?"诶？":"进度 ICON 常驻已禁用")}),t.forceShowBarIcon?t.webSpeech&&(at(),nt("启用进度图标常驻.mp3")):t.webSpeech&&(at(),nt("禁用进度图标常驻.mp3"))};return v(()=>t.getPlayerLrc,(e,a)=>{const n=!t.dwrcEnable||0===t.dwrcTemp.length||t.dwrcLoading;if(!t.playerDWRCShowPro||n)return;const l=document.querySelector("audio");if(!l)return;const s=1e3*l.currentTime,r=document.getElementsByClassName("dwrc-box")[0];if(!r||null==r)return;const o=r.querySelectorAll("#dwrc-2-wrap span"),i=r.querySelectorAll("#dwrc-1-wrap span");if(0==i.length||0==o.length)return;const c=t.dwrcTemp.filter(e=>e[0]<s&&s<e[0]+e[1]);if(0==c.length)return;const u=c[c.length-1][2];for(let t=0;t<u.length;t++){const e=u[t],[[a,n],l,r,c]=e,d=i[t];if(!d||d.hasAttribute("data-start"))continue;const p=window.getComputedStyle(d),m=parseFloat(p.width);if(isNaN(m)){d.removeAttribute("data-start");continue}const h=o[t],v={delay:Math.max(0,a-s),duration:n,fill:"forwards",easing:"linear"};h.style.transform="translateY(-1px)";h.animate([{width:0},{width:`${m}px`}],v).onfinish=()=>{h.style.transform="translateY(1px)",h.animate([{transform:"translateY(-1px)"},{transform:"translateY(1px)"}],{duration:300,fill:"forwards",easing:"linear"})},d.setAttribute("data-start","true")}}),(e,a)=>(i(),o("footer",{id:"footer",class:c(u(t).footerBlur?"blur":null)},[g(_,{name:"fade",mode:"out-in"},{default:y(()=>[u(t).playerState&&u(t).playerLrcShow?(i(),o("div",{key:1,class:"lrc",onDblclick:b},[u(t).footerProgressBar?(i(),C(Fa,{key:0})):D("",!0),u(t).dwrcEnable&&0!=u(t).dwrcTemp.length&&!u(t).dwrcLoading?(i(),C(_,{key:1,name:"fade",mode:"out-in",id:`lrc-line-${u(t).playerLrc[0][2]}`},{default:y(()=>[(i(),o("div",{class:"lrc-all",key:0!=u(t).playerLrc.length?`lrc-line-${u(t).playerLrc[0][2]}-${u(t).lyricSeekVersion}`:"lrc-line-null"},[g(u(P),{theme:"filled",size:"18",fill:"var(--footer-music-icon-color)"}),a[5]||(a[5]=ve("   ",-1)),g(u(f),{size:"20",style:{transform:"rotate(-18deg)"},class:"paws-1",color:"var(--footer-music-paw-icon-color)"},{default:y(()=>[g(u(ge))]),_:1}),d("span",tn,[d("span",an,[(i(!0),o(T,null,I(u(t).playerLrc,(e,t)=>(i(),o("span",{key:`lrc-over-char-${e[2]}-${e[3]}`,innerHTML:e[4]},null,8,nn))),128))]),d("span",ln,[(i(!0),o(T,null,I(u(t).playerLrc,(e,t)=>(i(),o("span",{key:`lrc-char-${e[2]}-${e[3]}`,class:c(["dwrc-char",e[0]&&Number(e[6])>0?"fade-in":"fade-in-start",e[0]&&Number(e[5])>1019&&Number(e[6])>0?"long-tone":"fade-in-start",e[0]&&Number(e[6])<=0?"fade-out":"",e[0]&&Number(e[5])>1019&&Number(e[6])<=0?"long-tone-out":"",e[1]?"dwrc-style-s2":"dwrc-style-s1"]),id:`lrc-char-${e[2]}-${e[3]}`,innerHTML:e[4]},null,10,sn))),128))])]),g(u(f),{size:"20",style:{transform:"rotate(18deg)"},class:"paws-2",color:"var(--footer-music-paw-icon-color)"},{default:y(()=>[g(u(ge))]),_:1}),a[6]||(a[6]=ve("   ",-1)),g(u(P),{theme:"filled",size:"18",fill:"var(--footer-music-icon-color)"})]))]),_:1},8,["id"])):(i(),C(_,{key:2,name:"fade",mode:"out-in"},{default:y(()=>[(i(),o("div",{class:"lrc-all",key:u(t).getPlayerLrc.length>0?`lrc-${u(t).getPlayerLrc[0][2]}-${u(t).getPlayerLrc.length}`:"歌词加载中..."},[g(u(P),{theme:"filled",size:"18",fill:"var(--footer-music-icon-color)"}),a[7]||(a[7]=ve("   ",-1)),g(u(f),{size:"20",style:{transform:"rotate(-18deg)"},class:"paws-3",color:"var(--footer-music-paw-icon-color)"},{default:y(()=>[g(u(ge))]),_:1}),d("span",{class:c(["lrc-text text-truncate-ellipsis","lrc-char"]),innerHTML:u(t).getPlayerLrc[0][4]},null,8,rn),g(u(f),{size:"20",style:{transform:"rotate(18deg)"},class:"paws-4",color:"var(--footer-music-paw-icon-color)"},{default:y(()=>[g(u(ge))]),_:1}),a[8]||(a[8]=ve("   ",-1)),g(u(P),{theme:"filled",size:"18",fill:"var(--footer-music-icon-color)"})]))]),_:1}))],32)):(i(),o("div",Ua,[d("span",null,[d("span",{class:c(s.value?"c-hidden":"o-hidden")},"Copyright ",2),a[0]||(a[0]=ve(" © ",-1)),s.value?(i(),o("span",Wa,p(l.value)+" - ",1)):D("",!0),ve(" "+p(u(n))+" ",1),d("a",{href:S.value},p(w.value),9,Ga)]),d("span",Ya,[a[1]||(a[1]=ve(" & Made by ",-1)),d("a",{href:u(We).github,target:"_blank"},p(u(We).author),9,qa)]),d("span",Xa,[a[2]||(a[2]=ve(" & Update by ",-1)),d("a",{href:u(We).efug,target:"_blank"},p(u(We).efua),9,Ka)]),d("span",null,[r.value?(i(),o("span",Ja,[a[3]||(a[3]=ve(" &  ",-1)),r.value?(i(),o("a",Qa,p(r.value),1)):D("",!0)])):D("",!0),h.value?(i(),o("span",Za,[a[4]||(a[4]=ve(" &  ",-1)),h.value?(i(),o("a",en,p(h.value),1)):D("",!0)])):D("",!0)])]))]),_:1})],2))}}),[["__scopeId","data-v-cee84e86"]]),cn={class:"time-capsule"},un={class:"title"},dn={key:0,class:"all-capsule"},pn={class:"item-title"},mn={class:"percentage"},hn={class:"remaining"},vn={key:0,class:"capsule-item start"},gn={class:"item-title"},fn=pt(r({__name:"TimeCapsule",setup(e){const t=it(),a=E(st()),n=E(Ge.VITE_SITE_START),l=E(null),s=E(null);return k(()=>{s.value=window.setInterval(()=>{a.value=st(),n.value&&(l.value=(e=>{const t=new Date;let a=t.getFullYear()-e.getFullYear(),n=t.getMonth()-e.getMonth(),l=t.getDate()-e.getDate();l<0&&(n--,l+=new Date(t.getFullYear(),t.getMonth()-1,0).getDate());return n<0&&(a--,n+=12),`本站已经苟活了 ${a} 年 ${n} 月 ${l} 天`})(new Date(n.value)))},1e3)}),K(()=>{null!==s.value&&(clearInterval(s.value),s.value=null)}),(e,n)=>{const s=ye;return i(),o("div",cn,[d("div",un,[g(u(fe),{theme:"two-tone",size:"24",fill:["var(--time-icon-one-color)","var(--time-icon-two-color)"]}),n[0]||(n[0]=d("span",null,"时光胶囊",-1))]),a.value?(i(),o("div",dn,[(i(!0),o(T,null,I(a.value,(e,t,a)=>(i(),o("div",{key:a,class:"capsule-item"},[d("div",pn,[d("span",mn,[ve(p(e.name)+"已度过 ",1),d("strong",null,p(e.passed),1),ve(" "+p("day"===t?"小时":"天"),1)]),d("span",hn," 剩余 "+p(e.remaining)+" "+p("day"===t?"小时":"天"),1)]),g(s,{"text-inside":!0,"stroke-width":20,percentage:Number(e.percentage)},null,8,["percentage"])]))),128)),u(t).siteStartShow?(i(),o("div",vn,[d("div",gn,p(l.value),1)])):D("",!0)])):D("",!0)])}}}),[["__scopeId","data-v-81de5cd6"]]),yn={class:"more-content"},wn=pt(r({__name:"MoreContent",setup:e=>(it(),(e,t)=>(i(),o("div",yn,[...t[0]||(t[0]=[d("span",{class:"greeting"}," 您可在此编写任意内容 ",-1)])])))}),[["__scopeId","data-v-0fcab73d"]]),_n={class:"content"},Sn=pt(r({__name:"index",setup(e){const t=it(),a=E(!1);return(e,n)=>(i(),o("div",{class:"box cards",onMouseenter:n[2]||(n[2]=e=>a.value=!0),onMouseleave:n[3]||(n[3]=e=>a.value=!1)},[g(_,{name:"el-fade-in-linear"},{default:y(()=>[$(g(u(q),{class:"close",theme:"filled",size:"28",fill:"var(--close-icon-color)",onClick:n[0]||(n[0]=e=>u(t).boxOpenState=!1)},null,512),[[N,u(a)]])]),_:1}),g(_,{name:"el-fade-in-linear"},{default:y(()=>[$(g(u(we),{class:"setting",theme:"filled",size:"28",fill:"var(--close-icon-color)",onClick:n[1]||(n[1]=e=>u(t).setOpenState=!0)},null,512),[[N,u(a)]])]),_:1}),d("div",_n,[g(fn),g(wn)])],32))}}),[["__scopeId","data-v-e65f8dc2"]]);let bn=null,En=null;const Tn=e=>{const t=[],a=e.replace(/^[^\d]+/i,"").split(".");for(const n of a){const e=n.match(/\d+/);if(e&&(t.push(e[0]),t.length>=3))break}for(;t.length<3;)t.push("0");return t.slice(0,3).join(".")},In={class:"devsettings"},xn={class:"item"},Ln={class:"item"},kn={class:"item"},Vn={class:"item"},Cn={class:"item"},Dn={class:"item"},On={class:"upver"},Mn={class:"item"},Pn=pt(r({__name:"DevSet",setup(e){const t=E("0"),n=it(),{coverType:l,siteStartShow:s,musicClick:r,playerLrcShow:v,footerBlur:f,playerAutoplay:w,playerOrder:_,playerLoop:S,webSpeech:b,playerSpeechName:T,playerDWRCShow:I,playerDWRCShowPro:x,playerDWRCATDB:L,playerDWRCATDBF:k,footerProgressBar:V,seasonalEffects:C,setV:D,theme:O,msgNameShow:M,playerDWRCPilfer:P}=_e(n),A=(e=>{const t=e.match(/^(\d+\.\d+\.\d+)/),a=/\.dev\b/.test(e),n=/\.pre\b/.test(e),l=/\.beta\b/.test(e),s=e.match(/\[([^\]]+)\]$/);return En=n?"preview":a?"development":l?"beta":"release",bn="imsyy"!=s?.[1]?We.efua:We.author,{version:t?.[1]||"0.0.0",type:En,channel:s?.[1]||"imsyy",upa:bn}})(We.version);let $=0;const N=m(()=>{switch(A.type){case"preview":return"预览版";case"development":return"开发版";case"beta":return"尝鲜版";case"release":return"正式版";default:return"未知版本"}}),R=async()=>{const e=await(async e=>{try{const t=(e=>{const t=e.match(/github\.com\/([^/]+)\/([^/]+)/i);return!t||t.length<3?null:{owner:t[1],repo:t[2].replace(/\.git$/,"")}})("imsyy"===e.upa?We.github:We.efug);if(!t)throw new Error("无效的 GitHub 仓库 URL");const a=`https://api.github.com/repos/${t.owner}/${t.repo}/releases/latest`,n=await fetch(a);if(!n.ok)throw new Error(`GitHub API 错误: ${n.status}`);const l=await n.json(),s=l.tag_name,r=l.prerelease,o=l.target_commitish?.toLowerCase()||"",i=e.channel.toLowerCase();if(""!==o&&o!==i)return{status:"true",latestVersion:e.version,isPreview:"release"===e.type?"false":"true",versionType:e.type};const c=(e=>{const t=e.replace(/^v/i,"").replace(/\.[a-z]+$/i,""),a=t.match(/\.([a-z]+)\.?/i);return a&&a[1]?a[1].toLowerCase():t.includes(".pre")?"pre":t.includes(".beta")?"beta":t.includes(".dev")?"dev":t.includes(".alpha")?"alpha":"release"})(s);if(!(r&&["pre","beta","dev","alpha"].includes(c)||!r&&"release"===c))return{status:"true",latestVersion:e.version,isPreview:"release"===e.type?"false":"true",versionType:e.type};const u=Tn(s),d=((e,t)=>{const a=e.split(".").map(Number),n=t.split(".").map(Number);for(let l=0;l<Math.max(a.length,n.length);l++){const e=a[l]||0,t=n[l]||0;if(e<t)return-1;if(e>t)return 1}return 0})(Tn(e.version),u),p="release"!==e.type;let m=!1;return m=0===d?!(p&&!r):d>0||!(!r||p),{status:m?"true":"false",latestVersion:u,isPreview:r?"true":"false",versionType:c}}catch(t){return console.error("更新检查失败:",t),{status:"error",latestVersion:"0.0.0",isPreview:"false",versionType:"error"}}})(A);"true"==e.status?(a({message:`当前已是最新版本！ v${A.version} ， ${A.type} 。`,grouping:!0}),n.webSpeech&&(at(),nt("检查更新-已是最新版本.mp3"))):"false"==e.status?(a({message:`发现新版本 v${e.latestVersion}，${"true"==e.isPreview?"预览版":"正式版"}，${e.versionType} ，快来体验吧！`,grouping:!0}),n.webSpeech&&(at(),nt("检查更新-发现新版本.mp3"))):(a({message:"版本检测异常，稍后再试试叭~",grouping:!0}),n.webSpeech&&(at(),nt("检查更新-检测异常.mp3")))},H=e=>{switch(e){case"snow":n.showSnowfall?Ia():Ea();break;case"firefly":n.showFirefly?Pa():Oa();break;case"lantern":n.showLantern?Ra():Na()}},j=h({wallpaperId:""}),B=()=>{if(0!=n.coverType)return a.error("当前使用非内置壁纸，不支持该功能！"),void(n.webSpeech&&(at(),nt("壁纸ID设置失败.mp3")));if(!j.wallpaperId.trim())return a.error("壁纸号不能为空！"),void(n.webSpeech&&(at(),nt("壁纸ID设置失败.mp3")));if(!/^\d+$/.test(j.wallpaperId))return a.error("壁纸号必须为纯数字！"),void(n.webSpeech&&(at(),nt("壁纸ID设置失败.mp3")));const e=parseInt(j.wallpaperId,10);n.setSBGCount(Number(e)),a.success(`已设置壁纸ID: ${e}`),n.webSpeech&&(at(),nt("壁纸ID设置成功.mp3")),j.wallpaperId=""};return(e,l)=>{const s=Ee,r=be,m=xe,h=Ie,v=Te,f=Le,w=Se;return i(),o("div",In,[g(w,{class:"collapse",modelValue:t.value,"onUpdate:modelValue":l[8]||(l[8]=e=>t.value=e),accordion:""},{default:y(()=>[g(r,{title:"季节特效",name:"1"},{default:y(()=>[d("div",xn,[g(s,{plain:"",class:c(["el-button",{active:u(n).showSnowfall}]),onClick:l[0]||(l[0]=e=>H("snow"))},{default:y(()=>[ve(p(u(n).showSnowfall?"禁用":"启用")+"冬日飘雪",1)]),_:1},8,["class"]),g(s,{plain:"",class:c(["el-button",{active:u(n).showFirefly}]),onClick:l[1]||(l[1]=e=>H("firefly"))},{default:y(()=>[ve(p(u(n).showFirefly?"禁用":"启用")+"秋萤火虫",1)]),_:1},8,["class"]),g(s,{plain:"",class:c(["el-button",{active:u(n).showLantern}]),onClick:l[2]||(l[2]=e=>H("lantern"))},{default:y(()=>[ve(p(u(n).showLantern?"禁用":"启用")+"春节灯笼",1)]),_:1},8,["class"])])]),_:1}),g(r,{title:"壁纸调整",name:"2"},{default:y(()=>[l[10]||(l[10]=d("div",{class:"item"},[d("div",{class:"upver"},"使用内置壁纸时临时指定壁纸")],-1)),d("div",Ln,[g(v,{model:j,style:{"max-width":"120px"},"label-width":"auto",onSubmit:Y(B,["prevent"])},{default:y(()=>[g(h,{prop:"wallpaperId",rules:[{required:!0,message:"壁纸号不能为空",trigger:"blur"},{pattern:/^\d+$/,message:"壁纸号必须为纯数字",trigger:["blur","change"]}]},{default:y(()=>[g(m,{modelValue:j.wallpaperId,"onUpdate:modelValue":l[3]||(l[3]=e=>j.wallpaperId=e),type:"text",autocomplete:"off",clearable:""},null,8,["modelValue"]),g(s,{plain:"",class:"el-button","native-type":"submit",disabled:!j.wallpaperId},{default:y(()=>[...l[9]||(l[9]=[ve("确定",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])])]),_:1}),g(r,{title:"个性化设置",name:"3"},{default:y(()=>[d("div",kn,[l[11]||(l[11]=d("span",{class:"text"},"信息区域显示自定义名",-1)),g(f,{modelValue:u(M),"onUpdate:modelValue":l[4]||(l[4]=e=>G(M)?M.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])])]),_:1}),g(r,{title:"歌词设置",name:"4"},{default:y(()=>[d("div",Vn,[l[12]||(l[12]=d("span",{class:"text"},"拆东墙补西墙",-1)),g(f,{modelValue:u(P),"onUpdate:modelValue":l[5]||(l[5]=e=>G(P)?P.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])])]),_:1}),g(r,{title:"重置",name:"5"},{default:y(()=>[d("div",Cn,[g(s,{plain:"",class:"el-button",onClick:l[6]||(l[6]=e=>($+=1,void(3===$?(a({dangerouslyUseHTMLString:!0,message:"正在恢复默认配置，请稍后..."}),n.webSpeech&&(at(),nt("重置2.mp3")),n.resetStore()):$>3?(a({dangerouslyUseHTMLString:!0,message:"正在加载初始设置，请稍后..."}),n.webSpeech&&(at(),nt("重置3.mp3"))):(a({dangerouslyUseHTMLString:!0,message:"确定要重置所有设置吗？操作将在点击 3 次后执行。"}),n.webSpeech&&(at(),nt("重置1.mp3"))))))},{default:y(()=>[...l[13]||(l[13]=[ve("重置所有设置",-1)])]),_:1})])]),_:1}),g(r,{title:"检查版本更新",name:"6"},{default:y(()=>[d("div",Dn,[d("div",On,"版本号 v"+p(u(A).version)+"，"+p(u(N))+"，"+p(u(A).channel)+" 渠道，by "+p(u(A).upa)+" 。 ",1)]),d("div",Mn,[g(s,{plain:"",class:"el-button",onClick:l[7]||(l[7]=e=>R())},{default:y(()=>[...l[14]||(l[14]=[ve("检查更新",-1)])]),_:1})])]),_:1})]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-5bf72311"]]),An={class:"setting"},$n={class:"bg-set"},Nn={class:"item"},Rn={class:"item"},Hn={class:"item"},jn={class:"item"},Bn={class:"item"},zn={class:"item"},Fn={class:"item"},Un={class:"item"},Wn={class:"item"},Gn={class:"item"},Yn={key:0,class:"item"},qn={key:1,class:"item"},Xn={key:2,class:"item"},Kn={key:3,class:"item"},Jn={class:"item"},Qn={class:"item"},Zn={key:0,class:"item"},el=pt(r({__name:"Set",setup(e){const t=it(),{coverType:l,siteStartShow:s,musicClick:r,playerLrcShow:c,footerBlur:p,playerAutoplay:m,playerOrder:h,playerLoop:v,webSpeech:f,playerSpeechName:w,playerTrLrc:_,playerDWRCShow:S,playerDWRCShowPro:b,playerDWRCATDB:T,playerDWRCATDBF:I,footerProgressBar:x,seasonalEffects:L,setV:k,theme:V,msgNameShow:O}=_e(t),M=E("0"),P=()=>{a({message:"壁纸更换成功",icon:n(Oe,{theme:"filled",fill:"var(--el-message-icon-color)"})}),t.webSpeech&&(at(),nt("更换壁纸成功.mp3"))};return(e,t)=>{const a=De,n=Ce,E=be,O=Le,A=Se;return i(),o("div",An,[g(A,{class:"collapse",modelValue:u(M),"onUpdate:modelValue":t[18]||(t[18]=e=>G(M)?M.value=e:null),accordion:""},{default:y(()=>[g(E,{title:"个性壁纸",name:"1"},{default:y(()=>[d("div",$n,[g(n,{modelValue:u(l),"onUpdate:modelValue":t[0]||(t[0]=e=>G(l)?l.value=e:null),"text-color":"#ffffff",onChange:P},{default:y(()=>[g(a,{value:"0",size:"large",border:""},{default:y(()=>[...t[19]||(t[19]=[ve("默认壁纸",-1)])]),_:1}),g(a,{value:"1",size:"large",border:""},{default:y(()=>[...t[20]||(t[20]=[ve("每日一图",-1)])]),_:1}),g(a,{value:"2",size:"large",border:""},{default:y(()=>[...t[21]||(t[21]=[ve("随机风景",-1)])]),_:1}),g(a,{value:"3",size:"large",border:""},{default:y(()=>[...t[22]||(t[22]=[ve("随机动漫",-1)])]),_:1})]),_:1},8,["modelValue"])])]),_:1}),g(E,{title:"主题设置",name:"2"},{default:y(()=>[d("div",Nn,[t[28]||(t[28]=d("span",{class:"text"},"主题模式",-1)),t[29]||(t[29]=d("br",null,null,-1)),t[30]||(t[30]=d("br",null,null,-1)),g(n,{modelValue:u(V),"onUpdate:modelValue":t[1]||(t[1]=e=>G(V)?V.value=e:null),size:"small","text-color":"#FFFFFF"},{default:y(()=>[g(a,{value:"system",border:""},{default:y(()=>[...t[23]||(t[23]=[ve("跟随系统",-1)])]),_:1}),g(a,{value:"time",border:""},{default:y(()=>[...t[24]||(t[24]=[ve("跟随时间",-1)])]),_:1}),g(a,{value:"bg",border:""},{default:y(()=>[...t[25]||(t[25]=[ve("跟随背景",-1)])]),_:1}),g(a,{value:"light",border:""},{default:y(()=>[...t[26]||(t[26]=[ve("浅色模式",-1)])]),_:1}),g(a,{value:"dark",border:""},{default:y(()=>[...t[27]||(t[27]=[ve("深色模式",-1)])]),_:1})]),_:1},8,["modelValue"])])]),_:1}),g(E,{title:"个性化调整",name:"3"},{default:y(()=>[d("div",Rn,[t[31]||(t[31]=d("span",{class:"text"},"建站日期显示",-1)),g(O,{modelValue:u(s),"onUpdate:modelValue":t[2]||(t[2]=e=>G(s)?s.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])]),d("div",Hn,[t[32]||(t[32]=d("span",{class:"text"},"音乐点击是否打开面板",-1)),g(O,{modelValue:u(r),"onUpdate:modelValue":t[3]||(t[3]=e=>G(r)?r.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])]),d("div",jn,[t[33]||(t[33]=d("span",{class:"text"},"显示季节特效",-1)),g(O,{modelValue:u(L),"onUpdate:modelValue":t[4]||(t[4]=e=>G(L)?L.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])]),d("div",Bn,[t[34]||(t[34]=d("span",{class:"text"},"底栏背景模糊",-1)),g(O,{modelValue:u(p),"onUpdate:modelValue":t[5]||(t[5]=e=>G(p)?p.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])]),d("div",zn,[t[35]||(t[35]=d("span",{class:"text"},"显示底栏音乐进度条",-1)),g(O,{modelValue:u(x),"onUpdate:modelValue":t[6]||(t[6]=e=>G(x)?x.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])])]),_:1}),g(E,{title:"播放器配置",name:"4"},{default:y(()=>[d("div",Fn,[t[36]||(t[36]=d("span",{class:"text"},"自动播放",-1)),g(O,{modelValue:u(m),"onUpdate:modelValue":t[7]||(t[7]=e=>G(m)?m.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])]),d("div",Un,[t[37]||(t[37]=d("span",{class:"text"},"随机播放",-1)),g(O,{modelValue:u(h),"onUpdate:modelValue":t[8]||(t[8]=e=>G(h)?h.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke),"active-value":"random","inactive-value":"list"},null,8,["modelValue","active-icon","inactive-icon"])]),d("div",Wn,[t[41]||(t[41]=d("span",{class:"text"},"循环模式",-1)),g(n,{modelValue:u(v),"onUpdate:modelValue":t[9]||(t[9]=e=>G(v)?v.value=e:null),size:"small","text-color":"#FFFFFF"},{default:y(()=>[g(a,{value:"all",border:""},{default:y(()=>[...t[38]||(t[38]=[ve("列表",-1)])]),_:1}),g(a,{value:"one",border:""},{default:y(()=>[...t[39]||(t[39]=[ve("单曲",-1)])]),_:1}),g(a,{value:"none",border:""},{default:y(()=>[...t[40]||(t[40]=[ve("不循环",-1)])]),_:1})]),_:1},8,["modelValue"])])]),_:1}),g(E,{title:"歌词设置",name:"5"},{default:y(()=>[d("div",Gn,[t[42]||(t[42]=d("span",{class:"text"},"显示底栏歌词",-1)),g(O,{modelValue:u(c),"onUpdate:modelValue":t[10]||(t[10]=e=>G(c)?c.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])]),u(c)?(i(),o("div",Yn,[t[43]||(t[43]=d("span",{class:"text","white-space":"pre"},[ve("允许调用 AMLL TTML Database 加载网易云没有的歌词"),d("br"),ve("   （在 Github 不稳定的网络中可能导致歌词载入速度变慢）")],-1)),g(O,{modelValue:u(T),"onUpdate:modelValue":t[11]||(t[11]=e=>G(T)?T.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])])):D("",!0),u(c)&&u(T)?(i(),o("div",qn,[t[44]||(t[44]=d("span",{class:"text","white-space":"pre"},"调用 AMLL TTML Database 时使用镜像加速",-1)),g(O,{modelValue:u(I),"onUpdate:modelValue":t[12]||(t[12]=e=>G(I)?I.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])])):D("",!0),u(c)?(i(),o("div",Xn,[t[45]||(t[45]=d("span",{class:"text"},"逐字歌词解析总开关",-1)),g(O,{modelValue:u(S),"onUpdate:modelValue":t[13]||(t[13]=e=>G(S)?S.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])])):D("",!0),u(c)&&u(S)?(i(),o("div",Kn,[t[46]||(t[46]=d("span",{class:"text"},"逐字效果增强开关",-1)),g(O,{modelValue:u(b),"onUpdate:modelValue":t[14]||(t[14]=e=>G(b)?b.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])])):D("",!0),d("div",Jn,[t[47]||(t[47]=d("span",{class:"text"},"逐行歌词翻译显示开关",-1)),g(O,{modelValue:u(_),"onUpdate:modelValue":t[15]||(t[15]=e=>G(_)?_.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])])]),_:1}),g(E,{title:"语音设置",name:"6"},{default:y(()=>[d("div",Qn,[t[48]||(t[48]=d("span",{class:"text"},"网页语音交互总开关",-1)),g(O,{modelValue:u(f),"onUpdate:modelValue":t[16]||(t[16]=e=>G(f)?f.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])]),u(f)?(i(),o("div",Zn,[t[49]||(t[49]=d("span",{class:"text"},"播报歌名",-1)),g(O,{modelValue:u(w),"onUpdate:modelValue":t[17]||(t[17]=e=>G(w)?w.value=e:null),"inline-prompt":"","active-icon":u(Ve),"inactive-icon":u(ke)},null,8,["modelValue","active-icon","inactive-icon"])])):D("",!0)]),_:1}),g(E,{title:"其他设置",name:"7"},{default:y(()=>[...t[50]||(t[50]=[d("div",{class:"text"},"暂时没有其它啦qwq",-1)])]),_:1}),u(k)?(i(),C(E,{key:0,title:"开发设置",name:"8"},{default:y(()=>[g(Pn)]),_:1})):D("",!0)]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-1044dd52"]]),tl={class:"logo text-truncate-ellipsis"},al={class:"bg"},nl={class:"sm"},ll={class:"title"},sl={class:"mobileset-scrollable"},rl={class:"version"},ol={class:"logo text-truncate-ellipsis"},il={class:"bg"},cl={class:"sm"},ul={class:"version"},dl={class:"title"},pl={class:"set-scrollable"},ml=pt(r({__name:"index",setup(e){const t=it(),n=E(!1);let l=0;const s=m(()=>{let e=Ge.VITE_SITE_URL;e=e.replace(/^(https?:\/\/)/,"");return e.split("/")[0].split(":")[0].split(".")});h({new:["增加逐字歌词功能","依赖组件更新","支持在移动端打开设置","添加音乐进度条","动效优化","交互优化","支持在移动端显示不同的壁纸"],fix:["消除依赖及功能弃用提示","增强网页兼容性","修复 Player 模块的故障"]});const r=()=>{l+=1,l>4?(a({dangerouslyUseHTMLString:!0,message:"怎么还在戳哇喂！有那么神秘嘛...？"}),t.webSpeech&&(at(),nt("戳戳版本.mp3")),t.setV=!0):(a({dangerouslyUseHTMLString:!0,message:"诶？是在找...什么神秘的东西嘛？"}),t.webSpeech&&(at(),nt("戳版本.mp3")))},c=e=>{window.open(e)};return(e,a)=>{const l=Q,m=J,h=Ae;return u(t).mobileOpenState?(i(),o("div",{key:0,class:"mobileset",onMouseenter:a[3]||(a[3]=e=>n.value=!0),onMouseleave:a[4]||(a[4]=e=>n.value=!1),onClick:a[5]||(a[5]=Y(()=>{},["stop"]))},[g(_,{name:"el-fade-in-linear"},{default:y(()=>[g(u(q),{class:"close",theme:"filled",size:"28",fill:"var(--close-icon-color)",onClick:a[0]||(a[0]=e=>u(t).setOpenState=!1)})]),_:1}),g(m,null,{default:y(()=>[g(l,{class:"left"},{default:y(()=>[d("div",tl,[d("span",al,p(u(s)[0]),1),d("span",nl,"."+p(u(s)[1]),1)]),d("div",ll,[g(u(we),{theme:"filled",size:"28",fill:"var(--close-icon-color)"}),a[12]||(a[12]=d("span",{class:"name"},"全局设置",-1))]),d("div",sl,[g(el)]),d("div",rl,[d("div",{class:"num",onDblclick:r},"v "+p(u(We).version),33),g(u(Me),{class:"github",theme:"outline",size:"24",onClick:a[1]||(a[1]=e=>c(u(We).github))}),g(u(Pe),{class:"github",theme:"outline",size:"24",onClick:a[2]||(a[2]=e=>c(u(We).efug))})])]),_:1})]),_:1})],32)):(i(),o("div",{key:1,class:"set",onMouseenter:a[9]||(a[9]=e=>n.value=!0),onMouseleave:a[10]||(a[10]=e=>n.value=!1),onClick:a[11]||(a[11]=Y(()=>{},["stop"]))},[g(_,{name:"el-fade-in-linear"},{default:y(()=>[$(g(u(q),{class:"close",theme:"filled",size:"28",fill:"var(--close-icon-color)",onClick:a[6]||(a[6]=e=>u(t).setOpenState=!1)},null,512),[[N,u(n)]])]),_:1}),g(m,{gutter:40},{default:y(()=>[g(l,{span:12,class:"left"},{default:y(()=>[d("div",ol,[d("span",il,p(u(s)[0]),1),d("span",cl,"."+p(u(s)[1]),1)]),d("div",ul,[g(h,{content:"Version",placement:"top",effect:"color","show-arrow":!1},{default:y(()=>[d("div",{class:"num",onDblclick:r},"v "+p(u(We).version),33)]),_:1}),g(h,{content:"Github 源代码仓库",placement:"top",effect:"color","show-arrow":!1},{default:y(()=>[g(u(Me),{class:"github",theme:"outline",size:"24",onClick:a[7]||(a[7]=e=>c(u(We).github))})]),_:1}),g(h,{content:"扩展功能更新仓库",placement:"top",effect:"color","show-arrow":!1},{default:y(()=>[g(u(Pe),{class:"github",theme:"outline",size:"24",onClick:a[8]||(a[8]=e=>c(u(We).efug))})]),_:1})])]),_:1}),g(l,{span:12,class:"right"},{default:y(()=>[d("div",dl,[g(u(we),{theme:"filled",size:"28",fill:"var(--close-icon-color)"}),a[13]||(a[13]=d("span",{class:"name"},"全局设置",-1))]),d("div",pl,[g(el)])]),_:1})]),_:1})],32))}}}),[["__scopeId","data-v-4dba291f"]]);let hl=null;const vl=(e,t,a)=>Math.round(e)===t?t:(1-a)*e+a*t,gl=(e,t)=>{try{return window.getComputedStyle?window.getComputedStyle(e)[t]:e.currentStyle[t]}catch(a){console.error(a)}return!1};class fl{pos;pt;cursor=null;scr=null;constructor(){this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init(),this.render()}move(e,t){this.cursor&&(this.cursor.style.left=`${e}px`,this.cursor.style.top=`${t}px`)}create(){this.cursor||(this.cursor=document.createElement("div"),this.cursor.id="cursor",this.cursor.classList.add("is-xs-hidden"),this.cursor.classList.add("hidden"),document.body.append(this.cursor));const e=document.getElementsByTagName("*");for(let t=0;t<e.length;t++)"pointer"===gl(e[t],"cursor")&&this.pt.push(e[t].outerHTML);this.scr=document.createElement("style"),document.body.appendChild(this.scr),this.scr.innerHTML="* {cursor: url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='10px' height='10px'><circle cx='4' cy='4' r='4' fill='white' /></svg>\") 4 4, auto !important}"}refresh(){this.scr&&this.scr.remove(),this.cursor&&this.cursor.classList.remove("active"),this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init(),this.render()}init(){document.onmousemove=e=>{null==this.pos.curr&&this.move(e.clientX-8,e.clientY-8),this.pos.curr={x:e.clientX-8,y:e.clientY-8},this.cursor&&(this.cursor.classList.remove("is-xs-hidden"),this.cursor.classList.remove("hidden")),this.render()},document.onmouseenter=()=>{this.cursor&&this.cursor.classList.remove("is-xs-hidden"),this.cursor&&this.cursor.classList.remove("hidden")},document.onmouseleave=()=>{this.cursor&&this.cursor.classList.add("is-xs-hidden"),this.cursor&&this.cursor.classList.add("hidden")},document.onmousedown=()=>{this.cursor&&this.cursor.classList.add("active")},document.onmouseup=()=>{this.cursor&&this.cursor.classList.remove("active")}}render(){this.pos.prev&&this.pos.curr?(this.pos.prev.x=vl(this.pos.prev.x,this.pos.curr.x,.35),this.pos.prev.y=vl(this.pos.prev.y,this.pos.curr.y,.35),this.move(this.pos.prev.x,this.pos.prev.y)):this.pos.curr&&(this.pos.prev=this.pos.curr),this.pos.prev&&this.pos.curr&&!$e(this.pos.curr,this.pos.prev)&&requestAnimationFrame(()=>this.render())}}const yl={key:0,id:"main"},wl={class:"page-container"},_l={class:"all"},Sl={coverType:{allowed:[0,1,2,3],defaultValue:0},playerLoop:{allowed:["all","one","none"],defaultValue:"all"},playerOrder:{allowed:["list","random"],defaultValue:"random"},theme:{allowed:["system","time","bg","light","dark"],defaultValue:"system"}},bl=Re(pt(r({__name:"App",setup(e){const t=it(),s=E(null),r=()=>{t.setInnerWidth(window.innerWidth)},c=()=>{V(()=>{(e=>{const t=(new Date).getHours();let n=null,l=null;at(),t<5?(n="凌晨好，该睡了啦！",l="欢迎1.mp3"):t<7?(n="早上好，起的真早哦~",l="欢迎2.mp3"):t<9?(n="早上好，又是新的一天~",l="欢迎3.mp3"):t<11?(n="上午好！",l="欢迎4.mp3"):t<14?(n="中午好，辛苦了一个上午，补充下能量吧~",l="欢迎5.mp3"):t<17?(n="下午好！",l="欢迎6.mp3"):t<18?(n="傍晚好，吃顿美味的晚餐休息休息吧~",l="欢迎7.mp3"):t<22?(n="晚上好，娱乐一下，放松心情~",l="欢迎8.mp3"):t<23?(n="深夜好！夜深了，晚安噢w",l="欢迎9.mp3"):(n="深夜好！都快凌晨了啦，早点休息哦~",l="欢迎10.mp3"),a({dangerouslyUseHTMLString:!0,message:`<strong>${n}</strong> 欢迎来到我的主页`}),e.webSpeech&&nt(l)})(t),(()=>{const e=new Date,t=`${e.getMonth()+1}.${e.getDate()}`;if(Object.prototype.hasOwnProperty.call(rt,t)){console.log(`今天是${rt[t]}`);const e=document.createElement("style");e.innerHTML="html{filter: grayscale(100%)}",document.head.appendChild(e),a({message:`今天是${rt[t]}`,duration:14e3,icon:n(l,{theme:"filled",fill:"#efefef"})})}})()})};v(()=>t.innerWidth,e=>{null!=e&&e<721&&(t.boxOpenState=!1,t.setOpenState=!1)});const p=window.matchMedia("(prefers-color-scheme: dark)"),m=e=>{if("system"===t.theme){const t=e?e.matches:p.matches;document.documentElement.dataset.theme=t?"dark":"light"}},h=e=>{"bg"===t.theme&&(e=>new Promise((t,a)=>{const n=document.createElement("canvas"),l=n.getContext("2d");if(!l)return a(new Error("无法获取 canvas 的 2d context"));n.width=e.width,n.height=e.height;try{l.drawImage(e,0,0,n.width,n.height);const a=l.getImageData(0,0,n.width,n.height).data;let s=0,r=0;for(let e=0;e<a.length;e+=4){const t=a[e],n=a[e+1];(299*t+587*n+114*a[e+2])/1e3<128?r++:s++}t(s>r?"light":"dark")}catch(s){a(new Error("无法处理图片以获取颜色"))}}))(e).then(e=>{document.documentElement.dataset.theme=e}).catch(e=>{console.error(e),a.error("背景主题切换失败，已回退到跟随系统"),t.theme="system"})};return v(()=>t.theme,e=>{if(s.value&&(clearInterval(s.value),s.value=null),"light"===e)document.documentElement.dataset.theme="light";else if("dark"===e)document.documentElement.dataset.theme="dark";else if("system"===e)m();else if("time"===e){const e=()=>{const e=(new Date).getHours();document.documentElement.dataset.theme=e>=19||e<6?"dark":"light"};e(),s.value=setInterval(e,6e4)}else if("bg"===e){const e=document.querySelector(".bg");e&&e.complete&&h(e)}},{immediate:!0}),k(()=>{p.addEventListener("change",m),hl=new fl,document.oncontextmenu=()=>(a({message:"为了浏览体验，本站禁用右键",grouping:!0,duration:2e3}),t.webSpeech&&(at(),nt("鼠标右键.mp3")),!1),window.addEventListener("mousedown",e=>{1==e.button&&(t.backgroundShow=!t.backgroundShow,a({message:`已${t.backgroundShow?"开启":"退出"}壁纸展示状态`,grouping:!0}),t.webSpeech&&(t.backgroundShow?(at(),nt("壁纸预览已启用.mp3")):(at(),nt("壁纸预览已退出.mp3"))))}),r(),window.addEventListener("resize",r);const e=`\n\n版本: ${We.version}\n主页: ${We.home}\nGithub: ${We.github}\n当前为酪灰维护版本。`;console.info(`%c無名の主页 %c\n _____ __  __  _______     ____     __\n|_   _|  \\/  |/ ____\\ \\   / /\\ \\   / /\n  | | | \\  / | (___  \\ \\_/ /  \\ \\_/ /\n  | | | |\\/| |\\___ \\  \\   /    \\   /\n _| |_| |  | |____) |  | |      | |\n|_____|_|  |_|_____/   |_|      |_| %c${e}`,"font-size: 20px;font-weight: 600;color: rgb(244,167,89);","font-size:12px;color: rgb(244,167,89);","color: rgb(30,152,255);")}),K(()=>{window.removeEventListener("resize",r),p.removeEventListener("change",m),s.value&&clearInterval(s.value)}),(e,a)=>(i(),o(T,null,[g(mt),g(Ba,{onLoadComplete:c,onImageLoaded:h}),g(_,{name:"fade",mode:"out-in"},{default:y(()=>[u(t).imgLoadStatus?(i(),o("main",yl,[$(d("div",wl,[$(d("section",_l,[g(xt),$(g(ga,null,null,512),[[N,!u(t).boxOpenState]]),$(g(Sn,null,null,512),[[N,u(t).boxOpenState]])],512),[[N,!u(t).setOpenState]]),$(d("section",{class:"more",onClick:a[0]||(a[0]=e=>u(t).setOpenState=!1)},[g(ml)],512),[[N,u(t).setOpenState]])],512),[[N,!u(t).backgroundShow]]),$(g(u(f),{class:"menu",size:"24",onClick:a[1]||(a[1]=e=>u(t).mobileOpenState=!u(t).mobileOpenState)},{default:y(()=>[(i(),C(se(u(t).mobileOpenState?u(ke):u(Ne))))]),_:1},512),[[N,!u(t).backgroundShow]]),g(_,{name:"fade",mode:"out-in"},{default:y(()=>[$(g(on,{class:"f-ter"},null,512),[[N,!u(t).backgroundShow&&!u(t).setOpenState]])]),_:1})])):D("",!0)]),_:1})],64))}}),[["__scopeId","data-v-9ba5bf57"]])),El=He();El.use(je),El.use(({store:e})=>{e.$subscribe(t=>{if("direct"!==t.type)return;const n=Array.isArray(t.events)?t.events[0]:t.events;if(!(n&&"key"in n&&"newValue"in n&&"oldValue"in n))return;const{key:l,newValue:s,oldValue:r}=n;if(Object.prototype.hasOwnProperty.call(Sl,l)){const t=Sl[l];let n=s;t.allowed.length>0&&"number"==typeof t.allowed[0]&&(n=Number(s)),t.allowed.includes(n)||(e.$patch({[l]:r}),console.error(`不支持将变量 '${String(l)}' 的值设置为 '${s}'，已阻止更改。`),a({dangerouslyUseHTMLString:!0,message:`不支持将变量 '${String(l)}' 的值设置为 '${s}'，已阻止更改。`}),setTimeout(()=>{e.webSpeech&&(at(),nt("变量异常.mp3"))},300))}})}),bl.use(El);"imsyy"!=We.author||"NanoRocky"!=We.efua?console.error("Warning: Somethings error ... , please delete and re-download the project package."):(()=>{const e=document.getElementById("app");e&&(e.style.display="block"),bl.mount("#app");const t=it(),n=new URLSearchParams(window.location.search);"reset"===n.get("set")&&(a({dangerouslyUseHTMLString:!0,message:"正在恢复默认配置，请稍后..."}),t.webSpeech&&(at(),nt("重置2.mp3")),t.resetStore()),navigator.serviceWorker.addEventListener("controllerchange",async()=>{console.log("网站已更新，请刷新网页嗷！"),a("网站已更新，请刷新网页嗷！"),t.webSpeech&&(at(),nt("网站更新.mp3"))});const l=()=>setTimeout(()=>{"reset"!=n.get("set")&&!0===t.imgLoadStatus?(n.get("bg")&&(t.coverType=Number(n.get("bg"))),!n.get("bgc")||0!=t.coverType&&"0"!=n.get("bg")||(t.sBGCount=String(n.get("bgc"))),n.get("devs")&&(t.setV=Boolean(n.get("devs"))),n.get("pap")&&(t.playerAutoplay=Boolean(n.get("pap")))):l()},300);l()})();
